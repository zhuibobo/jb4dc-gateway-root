<!DOCTYPE html>
<html lang="zh" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <th:block th:replace="Fragment/GeneralLib::GeneralLib"></th:block>
    <th:block th:replace="Fragment/GeneralLib::JBuild4DFormDesignLib"></th:block>
    <th:block th:replace="Fragment/GeneralLib::ThemesLib"></th:block>
</head>
<body>
    <div class="html-design-plugin-dialog-wraper" id="dialogApp" v-cloak>
        <tabs size="small">
            <tab-pane label="绑定信息">
                <table cellpadding="0" cellspacing="0" border="0" class="html-design-plugin-dialog-table-wraper">
                    <colgroup>
                        <col style="width: 120px" />
                        <col style="width: 260px" />
                        <col style="width: 120px" />
                        <col />
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>
                                设置类型：
                            </td>
                            <td>
                                <radio-group type="button" style="margin: auto" v-model="normalProps.settingType">
                                    <radio label="bingToControl">绑定到控件</radio>
                                </radio-group>
                            </td>
                            <td>
                                单选/多选：
                            </td>
                            <td>
                                <radio-group type="button" style="margin: auto" v-model="normalProps.selectNumber">
                                    <radio label="single">单选</radio>
                                    <radio label="multiple">多选</radio>
                                </radio-group>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                单选时直接选择：
                            </td>
                            <td>
                                <radio-group type="button" style="margin: auto" v-model="normalProps.singleSelectAutoClose">
                                    <radio label="true">是</radio>
                                    <radio label="false">否</radio>
                                </radio-group>
                            </td>
                            <td>
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                按钮Text
                            </td>
                            <td>
                                <input type="text" v-model="normalProps.buttonText" />
                            </td>
                            <td>
                                对话框标题：
                            </td>
                            <td>
                                <input type="text" v-model="normalProps.selectDialogTitle" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                多选分割符：
                            </td>
                            <td>
                                <input type="text" v-model="normalProps.multipleSplit" />
                            </td>
                            <td>
                                默认选中组织：
                            </td>
                            <td>
                                <input type="text" v-model="normalProps.defaultSelectedOrganId" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                值设置到<br/>控件ID：
                            </td>
                            <td>
                                <input type="text" v-model="normalProps.resultValueBindToControlId" />
                            </td>
                            <td>
                                名称设置到<br/>控件ID：
                            </td>
                            <td>
                                <input type="text" v-model="normalProps.resultNameBindToControlId" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                值设置到<br/>控件绑定字段：
                            </td>
                            <td>
                                <input type="text" v-model="normalProps.resultValueBindToControlField" />
                            </td>
                            <td>
                                名称设置到<br/>控件绑定字段：
                            </td>
                            <td>
                                <input type="text" v-model="normalProps.resultNameBindToControlField" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                前置JS方法：
                            </td>
                            <td colspan="3">
                                <input type="text" v-model="normalProps.beforeSelectJSMethod" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                后置JS方法：
                            </td>
                            <td colspan="3">
                                <input type="text" v-model="normalProps.afterSelectedJsMethod" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                选择条件：
                            </td>
                            <td colspan="3">
                                <radio-group type="button" style="margin: auto" v-model="normalProps.selectCondition">
                                    <radio label="empty">无</radio>
                                </radio-group>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </tab-pane>
            <tab-pane label="基础信息">
                <fd-control-base-info v-model="baseInfo">
                </fd-control-base-info>
            </tab-pane>
        </tabs>
    </div>
    <script>
        var DialogApp=new Vue({
            el:"#dialogApp",
            data: {
                baseInfo:CKEditorPluginUtility.DefaultProps.baseInfo,
                normalProps:{
                    settingType:"bingToControl",
                    selectNumber:"single",
                    singleSelectAutoClose:"false",
                    buttonText:"...",
                    selectDialogTitle:"选择用户",
                    resultValueBindToControlId:"",
                    resultNameBindToControlId:"",
                    resultValueBindToControlField:"",
                    resultNameBindToControlField:"",
                    selectCondition:"empty",
                    multipleSplit:";",
                    defaultSelectedOrganId:""
                }
            },
            mounted:function () {

            },
            methods: {
                ready:function(actionName){
                    this.baseInfo.id="btn_select_organ_user_"+StringUtility.Timestamp();
                    this.baseInfo.name=this.baseInfo.id;
                },
                setBindCompleted:function(bindToField,defaultValue,validateRules){
                    this.bindToField=bindToField;
                },
                getControlProps:function () {
                    var result = {
                        success: true,
                        baseInfo: this.baseInfo,
                        normalProps:this.normalProps
                    }
                    result.baseInfo.serialize="false";
                    return result;
                },
                setControlProps:function ($elem,props) {
                    this.baseInfo = props.baseInfo ? props.baseInfo : this.baseInfo;

                    for(var key in this.normalProps){
                        if($elem.attr(StringUtility.ToLowerCase(key))){
                            this.normalProps[key]=$elem.attr(StringUtility.ToLowerCase(key));
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>