<!DOCTYPE html>
<html lang="zh" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <th:block th:replace="Fragment/GeneralLib::GeneralLib"></th:block>
    <th:block th:replace="Fragment/GeneralLib::JBuild4DFormDesignLib"></th:block>
    <th:block th:replace="Fragment/GeneralLib::ThemesLib"></th:block>
    <th:block th:replace="Fragment/GeneralLib::ZTreeExtendLib"></th:block>
</head>
<body>
<div class="html-design-plugin-dialog-wraper" id="dialogApp" v-cloak>
    <tabs size="small">
        <tab-pane label="附件上传">
            <table cellpadding="0" cellspacing="0" border="0" class="html-design-plugin-dialog-table-wraper">
                <colgroup>
                    <col style="width: 160px" />
                    <col style="width: 240px" />
                    <col style="width: 140px" />
                    <col />
                </colgroup>
                <tbody>
                    <tr>
                        <td>对象类型：</td>
                        <td colspan="3">
                            <i-input v-model="normalProps.objType" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            列表渲染方法：
                        </td>
                        <td>
                            <input type="text" v-model="normalProps.rendererContainerJsMethod" />
                        </td>
                        <td>
                            列表渲染单行方法：
                        </td>
                        <td>
                            <input type="text" v-model="normalProps.rendererSingleRowJsMethod" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            类别名称：
                        </td>
                        <td>
                            <input type="text" v-model="normalProps.categoryType" />
                        </td>
                        <td colspan="2">
                            同一条记录下存在不用种类的文件
                        </td>
                    </tr>
                    <tr>
                        <td>
                            绑定记录ID获取方法：
                        </td>
                        <td colspan="3">
                            <input type="text" v-model="normalProps.getBindRecordIdJsMethod" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            绑定记录类型获取方法：
                        </td>
                        <td colspan="3">
                            <input type="text" v-model="normalProps.getBindRecordTypeJsMethod" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            使用模版：
                        </td>
                        <td colspan="3">
                            <radio-group v-model="normalProps.useTemplate" type="button" size="small">
                                <radio label="defaultTemplate">默认模版</radio>
                            </radio-group>
                        </td>
                    </tr>
                </tbody>
            </table>
        </tab-pane>
        <tab-pane label="基础信息">
            <fd-control-base-info v-model="baseInfo">
            </fd-control-base-info>
        </tab-pane>
    </tabs>
</div>
<script>
    var DialogApp=new Vue({
        el:"#dialogApp",
        data: {
            baseInfo:CKEditorPluginUtility.DefaultProps.baseInfo,
            normalProps:{
                beforeSelectJSMethod:"",
                afterUploadedJsMethod:"",
                rendererContainerJsMethod:"",
                rendererSingleRowJsMethod:"",
                categoryType:"*",
                getBindRecordIdJsMethod:"",
                getBindRecordTypeJsMethod:"",
                useTemplate:"defaultTemplate",
                clickFileNameAction:"download",
                objType:""
            }
        },
        mounted:function () {

        },
        methods: {
            ready:function(actionName){
                this.baseInfo.id="file_image_wrap_"+StringUtility.Timestamp();
                this.baseInfo.name=this.baseInfo.id;
            },
            getControlProps:function () {
                if(StringUtility.IsNullOrEmpty(this.normalProps.objType)){
                    DialogUtility.Alert(window, DialogUtility.DialogAlertId, {}, "对象类型不能为空!", null);
                    return {success: false};
                }

                this.baseInfo.serialize="false";
                var result = {
                    success: true,
                    baseInfo: this.baseInfo,
                    normalProps:this.normalProps
                }
                result.baseInfo.serialize="false";
                return result;
            },
            setControlProps:function ($elem,props) {
                this.baseInfo = props.baseInfo ? props.baseInfo : this.baseInfo;

                this.normalProps.beforeSelectJSMethod = $elem.attr("beforeSelectJSMethod");
                this.normalProps.afterUploadedJsMethod = $elem.attr("afterUploadedJsMethod");
                this.normalProps.rendererContainerJsMethod = $elem.attr("rendererContainerJsMethod");
                this.normalProps.rendererSingleRowJsMethod = $elem.attr("rendererSingleRowJsMethod");
                this.normalProps.categoryType = $elem.attr("categoryType");
                this.normalProps.getBindRecordIdJsMethod = $elem.attr("getBindRecordIdJsMethod");
                this.normalProps.getBindRecordTypeJsMethod = $elem.attr("getBindRecordTypeJsMethod");
                this.normalProps.useTemplate = $elem.attr("useTemplate");
                this.normalProps.objType = $elem.attr("objType");
            }
        }
    });
</script>
</body>
</html>