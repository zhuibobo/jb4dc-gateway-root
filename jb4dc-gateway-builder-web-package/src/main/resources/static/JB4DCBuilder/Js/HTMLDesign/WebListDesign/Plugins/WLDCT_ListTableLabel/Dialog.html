<!DOCTYPE html><html lang="zh" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"><head><meta charset="UTF-8"><title>Title</title><title>JBuild4D</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><script type="text/javascript" src="../../../../../../Js/External/JQuery-3.6.0/jquery-3.6.0.min.js"></script><script type="text/javascript" src="../../../../../../Js/External/VUE-2.6.10/vue.js"></script><script type="text/javascript" src="../../../../../../Js/External/IView-4.X/dist/iview.min.js"></script><script type="text/javascript" src="../../../../../../Js/External/JQuery-UI-1.12.1/jquery-ui.js"></script><script type="text/javascript" src="../../../../../../Js/External/ZTree-3.5.40/js/jquery.ztree.all.js"></script><script type="text/javascript" src="../../../../../../Js/External/Perfect-Scrollbar-V1.4.0/perfect-scrollbar.js"></script><script type="text/javascript" src="../../../../../../Js/JBuild4DCLib.js?refVersion=1634822284356"></script><script type="text/javascript" src="../../../../../../Js/UIEXComponent.js?refVersion=1634822284356"></script><script type="text/javascript" src="../../../../../../Js/VueEXComponent.js?refVersion=1634822284356"></script><script type="text/javascript" src="../../../../../../JB4DCBuilder/Js/UIEXComponentForBuilder.js?refVersion=1634822284356"></script><script type="text/javascript" src="../../../../../../JB4DCBuilder/Js/BuilderVueEXComponent.js?refVersion=1634822284356"></script><script type="text/javascript" src="../../../../../../SSOSystem/Js/SSOVueEXComponent.js?refVersion=1634822284356"></script><script type="text/javascript" src="../../../../../../JB4DCBuilder/Js/HTMLDesign/HTMLDesignUtility.js?refVersion=1634822284356"></script><link rel="stylesheet" type="text/css" href="../../../../../../Themes/Default/IView-4.X/iview.css"><link rel="stylesheet" type="text/css" href="../../../../../../Themes/Default/JQueryUI/jquery-ui.css"><link rel="stylesheet" type="text/css" href="../../../../../../Themes/Default/JQueryUI/jquery-ui-important.css"><link rel="stylesheet" type="text/css" href="../../../../../../Js/External/Perfect-Scrollbar-V1.4.0/perfect-scrollbar.css"><link rel="stylesheet" type="text/css" href="../../../../../../Themes/Default/ZTree/zTreeStyle/zTreeStyle.css"><link rel="stylesheet" type="text/css" href="../../../../../../Themes/Default/Css/JBuild4DC.css?refVersion=1634822284356"><link rel="stylesheet" type="text/css" href="../../../../../../JB4DCBuilder/Themes/Default/Css/JBuild4DCBuilder.css?refVersion=1634822284356"></head><body><div class="html-design-plugin-dialog-wraper" id="dialogApp" v-cloak><tabs size="small"><tab-pane label="绑定信息"><list-table-label-bind-to-comp ref="listTableLabelBindToComp"></list-table-label-bind-to-comp></tab-pane><tab-pane label="标签设置"><div v-show="showProp"><table cellpadding="0" cellspacing="0" border="0" class="html-design-plugin-dialog-table-wraper"><colgroup><col style="width:120px"><col></colgroup><tbody><tr><td>格式化：</td><td><select v-model="normalProps.defFormat"><option value="notFormat">无</option><option value="yyyy-MM-dd">yyyy-MM-dd</option><option value="yyyy-MM-dd HH:mm:ss">yyyy-MM-dd HH:mm:ss</option><option value="convertOrganIdToOrganName">机构ID转机构名称</option><option value="convertDDValueToDDText">字典值转Text</option></select></td></tr><tr><td>数据字典：</td><td colspan="3"><div class="fleft">绑定数据字典:【<span style="color:red">{{normalProps.dictionaryGroupDataSourceText}}</span>】</div><button class="btn-select fright" @click="beginSelectDictionaryGroup">...</button></td></tr><tr><td>服务端解析类：</td><td><i-input v-model="normalProps.custServerResolveMethod" placeholder="按钮进行服务端解析时,保存模版时候调用,类全称,需要实现接口IListTableLabelCustResolve"></td></tr><tr><td>参数：</td><td><i-input v-model="normalProps.custServerResolveMethodPara" placeholder="服务端解析类的参数"></td></tr><tr><td>客户端渲染方法：</td><td><i-input v-model="normalProps.custClientRendererMethod" placeholder="客户端渲染方法,生成前端页面时调动,最终形成页面元素,需要返回最终元素的HTML对象"></td></tr><tr><td>参数：</td><td><i-input v-model="normalProps.custClientRendererMethodPara" placeholder="客户端渲染方法的参数"></td></tr><tr><td>省略长度：</td><td><i-input v-model="normalProps.omitLength" placeholder="客户端渲染方法的参数"></td></tr></tbody></table></div><div name="selectDictionary" v-show="showSelectDictionary" style="position:relative;height:490px"><div style="position:absolute;top:0;bottom:10px;right:0;left:0;overflow-y:auto;overflow-x:hidden"><ul id="dd-zTreeUL" class="ztree"></ul></div></div></tab-pane><tab-pane label="基础信息"><fd-control-base-info v-model="baseInfo"></fd-control-base-info></tab-pane></tabs></div><script>var DialogApp=new Vue({el:"#dialogApp",data:{acInterface:{getDDGroupTreeData:"/Rest/SystemSetting/Dict/DictionaryGroup/GetTreeData"},baseInfo:CKEditorPluginUtility.DefaultProps.baseInfo,defaultValue:CKEditorPluginUtility.DefaultProps.defaultValue,normalProps:{columnTableName:"",columnName:"",columnCaption:"",columnDataTypeName:"",targetButtonId:"",columnAlign:"",defFormat:"notFormat",custServerResolveMethod:"",custServerResolveMethodPara:"",custClientRendererMethod:"",custClientRendererMethodPara:"",dictionaryGroupDataSourceText:"",dictionaryGroupDataSourceId:"",omitLength:"0"},dataSetId:null,buttons:[],showSelectDictionary:!1,showEditStatic:!1,showProp:!0,ddGroupTreeObj:null,ddGroupTreeSetting:{async:{enable:!0,url:""},data:{key:{name:"dictGroupText"},simpleData:{enable:!0,idKey:"dictGroupId",pIdKey:"dictGroupParentId",rootId:0}},callback:{onClick:function(t,e,o){this.getZTreeObj(e)._host.selectedDictionaryGroup(o.dictGroupId,o.dictGroupText)},onAsyncSuccess:function(t,e,o,a){appList.treeObj.expandAll(!0)}}}},mounted:function(){this.initDDGroupTree()},methods:{ready:function(t,e,o){this.baseInfo.id="lab_"+StringUtility.Timestamp(),this.baseInfo.name=this.baseInfo.id,this.dataSetId=CKEditorPluginUtility.TryGetDataSetId(e,o),this.buttons=CKEditorPluginUtility.TryGetListButtonsInPluginPage(),this.bindDataSetFieldTree()},bindDataSetFieldTree:function(){if(this.dataSetId){var t=window.parent.listDesign.getDataSet(this.dataSetId);this.$refs.listTableLabelBindToComp.init(t,this.buttons)}else DialogUtility.AlertText("请先设定DataSet")},getControlProps:function(){var t=this.$refs.listTableLabelBindToComp.getData();return{success:!0,baseInfo:this.baseInfo,normalProps:{columnTableName:t.bindProp.columnTableName,columnName:t.bindProp.columnName,columnCaption:t.bindProp.columnCaption,columnDataTypeName:t.bindProp.columnDataTypeName,targetButtonId:t.bindProp.targetButtonId,columnAlign:t.bindProp.columnAlign,defFormat:this.normalProps.defFormat,custServerResolveMethod:this.normalProps.custServerResolveMethod,custServerResolveMethodPara:this.normalProps.custServerResolveMethodPara,custClientRendererMethod:this.normalProps.custClientRendererMethod,custClientRendererMethodPara:this.normalProps.custClientRendererMethodPara,dictionaryGroupDataSourceText:this.normalProps.dictionaryGroupDataSourceText,dictionaryGroupDataSourceId:this.normalProps.dictionaryGroupDataSourceId,omitLength:this.normalProps.omitLength},defaultValue:t.defaultValue}},setControlProps:function(t,e){this.baseInfo=e.baseInfo?e.baseInfo:this.baseInfo,this.defaultValue=e.defaultValue?e.defaultValue:this.defaultValue,this.normalProps.columnTableName=t.attr("columntablename"),this.normalProps.columnName=t.attr("columnname"),this.normalProps.columnCaption=t.attr("columncaption"),this.normalProps.columnDataTypeName=t.attr("columndatatypename"),this.normalProps.targetButtonId=t.attr("targetbuttonid"),this.normalProps.columnAlign=t.attr("columnalign"),this.normalProps.custServerResolveMethod=t.attr("custserverresolvemethod"),this.normalProps.custServerResolveMethodPara=t.attr("custserverresolvemethodpara"),this.normalProps.custClientRendererMethod=t.attr("custclientrenderermethod"),this.normalProps.custClientRendererMethodPara=t.attr("custclientrenderermethodpara"),this.normalProps.dictionaryGroupDataSourceText=t.attr("dictionaryGroupDataSourceText"),this.normalProps.dictionaryGroupDataSourceText||(this.normalProps.dictionaryGroupDataSourceText=""),this.normalProps.dictionaryGroupDataSourceId=t.attr("dictionaryGroupDataSourceId"),this.normalProps.dictionaryGroupDataSourceId||(this.normalProps.dictionaryGroupDataSourceId=""),this.normalProps.omitLength=t.attr("omitLength"),this.normalProps.omitLength||(this.normalProps.omitLength=""),t.attr("defformat")&&(this.normalProps.defFormat=t.attr("defformat")),this.$refs.listTableLabelBindToComp.setData(this.normalProps,this.defaultValue)},beginSelectDictionaryGroup:function(){this.showSelectDictionary=!0,this.showProp=!1},selectedDictionaryGroup:function(t,e){this.normalProps.dictionaryGroupDataSourceId=t,this.normalProps.dictionaryGroupDataSourceText=e,this.showSelectDictionary=!1,this.showProp=!0},initDDGroupTree:function(){AjaxUtility.Post(this.acInterface.getDDGroupTreeData,{},function(t){if(t.success){if(null!=t.data&&0<t.data.length)for(var e=0;e<t.data.length;e++);this.ddGroupTreeObj=$.fn.zTree.init($("#dd-zTreeUL"),this.ddGroupTreeSetting,t.data),this.ddGroupTreeObj.expandAll(!0),this.ddGroupTreeObj._host=this}},this)}}})</script></body></html>