<!DOCTYPE html><html lang="zh" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"><head><meta charset="UTF-8"><title>Title</title><title>JBuild4D</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><script type="text/javascript" src="../../../../../../Js/External/JQuery-3.6.0/jquery-3.6.0.min.js"></script><script type="text/javascript" src="../../../../../../Js/External/VUE-2.6.10/vue.js"></script><script type="text/javascript" src="../../../../../../Js/External/IView-4.X/dist/iview.min.js"></script><script type="text/javascript" src="../../../../../../Js/External/JQuery-UI-1.12.1/jquery-ui.js"></script><script type="text/javascript" src="../../../../../../Js/External/ZTree-3.5.40/js/jquery.ztree.all.js"></script><script type="text/javascript" src="../../../../../../Js/External/Perfect-Scrollbar-V1.4.0/perfect-scrollbar.js"></script><script type="text/javascript" src="../../../../../../Js/JBuild4DCLib.js?refVersion=1634816425311"></script><script type="text/javascript" src="../../../../../../Js/UIEXComponent.js?refVersion=1634816425311"></script><script type="text/javascript" src="../../../../../../Js/VueEXComponent.js?refVersion=1634816425311"></script><script type="text/javascript" src="../../../../../../JB4DCBuilder/Js/UIEXComponentForBuilder.js?refVersion=1634816425311"></script><script type="text/javascript" src="../../../../../../JB4DCBuilder/Js/BuilderVueEXComponent.js?refVersion=1634816425311"></script><script type="text/javascript" src="../../../../../../JB4DCBuilder/Js/HTMLDesign/HTMLDesignUtility.js?refVersion=1634816425311"></script><link rel="stylesheet" type="text/css" href="../../../../../../Themes/Default/IView-4.X/iview.css"><link rel="stylesheet" type="text/css" href="../../../../../../Themes/Default/JQueryUI/jquery-ui.css"><link rel="stylesheet" type="text/css" href="../../../../../../Themes/Default/JQueryUI/jquery-ui-important.css"><link rel="stylesheet" type="text/css" href="../../../../../../Js/External/Perfect-Scrollbar-V1.4.0/perfect-scrollbar.css"><link rel="stylesheet" type="text/css" href="../../../../../../Themes/Default/ZTree/zTreeStyle/zTreeStyle.css"><link rel="stylesheet" type="text/css" href="../../../../../../Themes/Default/Css/JBuild4DC.css?refVersion=1634816425311"><link rel="stylesheet" type="text/css" href="../../../../../../JB4DCBuilder/Themes/Default/Css/JBuild4DCBuilder.css?refVersion=1634816425311"><script type="text/javascript" src="../../../../../../Js/External/ZTree-3.5.40/js/jquery.ztree.exhide.js"></script><script type="text/javascript" src="../../../../../../Js/External/ZTree-3.5.40/js/fuzzysearch.js"></script><style>.ivu-table-small td{height:30px}.edit-table{line-height:1em}.TitleCell{padding:4px 6px!important}.iv-list-page-wrap .iv-list-table{margin-top:0;margin-bottom:0}</style></head><body><div class="html-design-plugin-dialog-wraper" id="dialogApp" v-cloak><tabs size="small" name="t1"><tab-pane tab="t1" label="绑定信息"><table cellpadding="0" cellspacing="0" border="0" class="html-design-plugin-dialog-table-wraper"><colgroup><col style="width:120px"><col style="width:280px"><col style="width:100px"><col></colgroup><tbody><tr><td>按钮标题：</td><td colspan="3"><input type="text" v-model="normalProps.buttonCaption" style="width:120px">&nbsp;&nbsp;<button-group size="small"><i-button @click="setButtonCaption('删除')">删除</i-button></button-group></td></tr><tr><td>是否显示：</td><td><radio-group type="button" style="margin:auto" v-model="normalProps.isShow" size="small"><radio label="true">是</radio><radio label="false">否</radio></radio-group></td><td>删除提示：</td><td><radio-group type="button" style="margin:auto" v-model="normalProps.isConfirm" size="small"><radio label="true">是</radio><radio label="false">否</radio></radio-group></td></tr><tr><td>操作类型：</td><td><radio-group type="button" style="margin:auto" v-model="normalProps.operation" size="small"><radio label="delete">删除数据</radio></radio-group></td><td>绑定权限：</td><td><i-select v-model="normalProps.bindAuthority" size="small" style="width:200px"><i-option value="notAuth">无权限绑定</i-option></i-select></td></tr><tr><td>删除类型：</td><td colspan="3"><radio-group type="button" style="margin:auto" v-model="normalProps.deleteType" size="small"><radio label="generalDelete">通用删除</radio><radio label="appointDelete">指定删除</radio></radio-group></td></tr><tr><td>记录所在表：</td><td colspan="3"><input type="text" v-model="normalProps.deleteTableAt"></td></tr><tr><td>确认提示字段：</td><td colspan="3"><input type="text" v-model="normalProps.confirmField"></td></tr><tr><td>确认提示格式化：</td><td colspan="3"><input type="text" v-model="normalProps.confirmFormat"></td></tr><tr><td>绑定数据集：</td><td colspan="3"><input type="text" v-model="normalProps.bindDataSetId" readonly="readonly"></td></tr></tbody></table></tab-pane><tab-pane tab="t1" label="字段&API"><fd-control-field-and-api ref="fdControlFieldAndApi" v-model="baseInfo"></fd-control-field-and-api></tab-pane><tab-pane tab="t1" label="基础信息"><fd-control-base-info v-model="baseInfo"></fd-control-base-info></tab-pane><tab-pane tab="t1" label="开发方法扩展"><table cellpadding="0" cellspacing="0" border="0" class="html-design-plugin-dialog-table-wraper"><colgroup><col style="width:150px"><col></colgroup><tbody><tr><td>服务端解析类：</td><td><i-input v-model="normalProps.custServerResolveMethod" placeholder="服务端解析,保存模版时候调用一次,类全称,需要实现接口IFormButtonCustResolve"></td></tr><tr><td>参数：</td><td><i-input v-model="normalProps.custServerResolveMethodPara" placeholder="服务端解析类的参数"></td></tr><tr><td>客户端渲染方法：</td><td><i-input v-model="normalProps.custClientRendererMethod" placeholder="客户端渲染方法,按钮将经由该方法渲染,最终形成页面元素,需要返回最终元素的HTML对象"></td></tr><tr><td>参数：</td><td><i-input v-model="normalProps.custClientRendererMethodPara" placeholder="客户端渲染方法的参数"></td></tr><tr><td>客户端渲染后方法：</td><td><i-input v-model="normalProps.custClientRendererAfterMethodPara" placeholder="客户端渲染后调用方法,经过默认的渲染,无返回值"></td></tr><tr><td>参数：</td><td><i-input v-model="normalProps.custClientRendererAfterMethodParaPara" placeholder="客户端渲染后方法的参数"></td></tr><tr><td>客户端点击前方法：</td><td><i-input v-model="normalProps.custClientClickBeforeMethod" placeholder="客户端点击该按钮时的前置方法,如果返回false将阻止默认调用"></td></tr><tr><td>参数：</td><td><i-input v-model="normalProps.custClientClickBeforeMethodPara" placeholder="客户端点击前方法的参数"></td></tr></tbody></table></tab-pane><tab-pane tab="t1" label="开发属性扩展"><table cellpadding="0" cellspacing="0" border="0" class="html-design-plugin-dialog-table-wraper"><colgroup><col style="width:150px"><col></colgroup><tbody><tr><td>唯一名：</td><td><i-input v-model="normalProps.custSingleName" placeholder="按钮的唯一名称,使用英文字母,可以为空,不为空时将检测是否唯一,将存入表TBUILD_LIST_BUTTON中"></td></tr><tr><td>URL附加参数：</td><td><i-input v-model="normalProps.custUrlAppendPara" placeholder="打开表单时的url附加参数,eg:name=1&age=2,变量替换规则参考......."></td></tr><tr><td>URL格式化方法：</td><td><i-input v-model="normalProps.custUrlAppendParaFormat" placeholder="针对[URL附加参数]的格式化方法,使用返回值作为附加参数"></td></tr><tr><td>自定义属性1：</td><td><i-input v-model="normalProps.custProp1" placeholder="自定义的属性1,将存入表TBUILD_LIST_BUTTON中"></td></tr><tr><td>自定义属性2：</td><td><i-input v-model="normalProps.custProp2" placeholder="自定义的属性2,将存入表TBUILD_LIST_BUTTON中"></td></tr><tr><td>自定义属性3：</td><td><i-input v-model="normalProps.custProp3" placeholder="自定义的属性3,将存入表TBUILD_LIST_BUTTON中"></td></tr><tr><td>自定义属性4：</td><td><i-input v-model="normalProps.custProp4" placeholder="自定义的属性4,将存入表TBUILD_LIST_BUTTON中"></td></tr></tbody></table></tab-pane></tabs></div><script>var DialogApp=new Vue({el:"#dialogApp",data:{baseInfo:CKEditorPluginUtility.DefaultProps.baseInfo,normalProps:{buttonType:"ListDeleteButton",buttonCaption:"删除",windowCaption:"JBUILD4D",openType:"Dialog",isShow:"true",isConfirm:"true",operation:"delete",bindAuthority:"notAuth",custServerResolveMethod:"",custServerResolveMethodPara:"",custClientRendererMethod:"",custClientRendererMethodPara:"",custClientRendererAfterMethodPara:"",custClientRendererAfterMethodParaPara:"",custClientClickBeforeMethod:"",custClientClickBeforeMethodPara:"",custSingleName:"",custUrlAppendPara:"",custUrlAppendParaFormat:"",custProp1:"",custProp2:"",custProp3:"",custProp4:"",deleteTableAt:"",deleteType:"generalDelete",confirmField:"",confirmFormat:"",bindDataSetId:"",apiJsonString:"",changeFieldJsonString:""},actionName:""},mounted:function(){},methods:{setButtonCaption:function(t){this.normalProps.buttonCaption=t},ready:function(t,r,o){this.baseInfo.id="delete_button_"+StringUtility.Timestamp(),this.baseInfo.name=this.baseInfo.id,this.actionName=t,this.dataSetId=CKEditorPluginUtility.TryGetDataSetId(r,o),this.normalProps.bindDataSetId=this.dataSetId,console.log(this.dataSetId),this.$refs.fdControlFieldAndApi.ready(this.dataSetId,null)},getControlProps:function(){if(this.baseInfo.serialize="false",""==this.normalProps.buttonCaption)return DialogUtility.AlertText("请设置按钮标题"),{success:!1};var t=this.$refs.fdControlFieldAndApi.getJson();return this.normalProps.apiJsonString=JsonUtility.JsonToString(t.apis),this.normalProps.changeFieldJsonString=JsonUtility.JsonToString(t.fields),{success:!0,baseInfo:this.baseInfo,normalProps:this.normalProps}},setControlProps:function(t,r){this.baseInfo=r.baseInfo?r.baseInfo:this.baseInfo,this.normalProps.buttonType="ListDeleteButton",this.normalProps.buttonCaption=t.attr("buttoncaption"),this.normalProps.windowCaption=t.attr("windowcaption"),this.normalProps.openType=t.attr("opentype"),this.normalProps.isShow=t.attr("isshow"),this.normalProps.isConfirm=t.attr("isConfirm"),this.normalProps.operation=t.attr("operation"),this.normalProps.bindAuthority=t.attr("bindauthority"),this.normalProps.custServerResolveMethod=t.attr("custserverresolvemethod"),this.normalProps.custServerResolveMethodPara=t.attr("custserverresolvemethodpara"),this.normalProps.custClientRendererMethod=t.attr("custclientrenderermethod"),this.normalProps.custClientRendererMethodPara=t.attr("custclientrenderermethodpara"),this.normalProps.custClientRendererAfterMethodPara=t.attr("custclientrendereraftermethodpara"),this.normalProps.custClientRendererAfterMethodParaPara=t.attr("custclientrendereraftermethodparapara"),this.normalProps.custClientClickBeforeMethod=t.attr("custclientclickbeforemethod"),this.normalProps.custClientClickBeforeMethodPara=t.attr("custclientclickbeforemethodpara"),this.normalProps.custSingleName=t.attr("custsinglename"),this.normalProps.custUrlAppendPara=t.attr("custurlappendpara"),this.normalProps.custUrlAppendParaFormat=t.attr("custurlappendparaformat"),this.normalProps.custProp1=t.attr("custprop1"),this.normalProps.custProp2=t.attr("custprop2"),this.normalProps.custProp3=t.attr("custprop3"),this.normalProps.custProp4=t.attr("custprop4"),this.normalProps.deleteTableAt=t.attr("deletetableat"),this.normalProps.deleteType=t.attr("deletetype"),this.normalProps.confirmField=t.attr("confirmfield"),this.normalProps.confirmFormat=t.attr("confirmformat"),this.normalProps.bindDataSetId=t.attr("binddatasetid"),this.normalProps.apiJsonString=t.attr("apijsonstring"),this.normalProps.changeFieldJsonString=t.attr("changefieldjsonstring"),this.actionName;var o=null,e=null;StringUtility.IsNullOrEmpty(this.normalProps.apiJsonString)||"[]"==this.normalProps.apiJsonString||(o=JsonUtility.StringToJson(this.normalProps.apiJsonString)),StringUtility.IsNullOrEmpty(this.normalProps.changeFieldJsonString)||"[]"==this.normalProps.changeFieldJsonString||(e=JsonUtility.StringToJson(this.normalProps.changeFieldJsonString)),this.$refs.fdControlFieldAndApi.setData(o,e)}}})</script></body></html>