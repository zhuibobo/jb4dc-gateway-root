"use strict";var Column_RTTableIsMain={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d=[{Value:"是",Text:"是"},{Value:"否",Text:"否"}],f="",o=t.BindName;if(null!=t.DefaultValue&&null!=t.DefaultValue)f=EditTableDefauleValue.GetValue(t);null!=r&&null!=r&&(f=r[o]),null!=i&&null!=i&&(f=i.attr("Value"));for(var p=$("<select style='width: 100%' />"),T=0;T<d.length;T++){var s=d[T];p.append("<option value='"+s.Value+"' text='"+s.Text+"'>"+s.Text+"</option>")}return p.val(f),"function"==typeof t.ChangeEvent&&p.change(function(){t.ChangeEvent(this,e,t,l,a,n,i)}),p},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.find("option:selected").attr("Value"),r=i.find("option:selected").attr("Text");return u||(u=""),r||(r=""),$("<label IsSerialize='true' BindName='"+t.BindName+"' Value='"+u+"' Text='"+r+"'>"+r+"</label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val();return EditTableValidate.Validate(u,t)}},Column_SelectDefaultValue={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d="",f="",o="";null!=r&&null!=r&&(d=r.columnDefaultType?r.columnDefaultType:"",f=r.columnDefaultValue?r.columnDefaultValue:"",o=r.columnDefaultText?r.columnDefaultText:""),null!=i&&null!=i&&i.find("label").each(function(){"columnDefaultType"==$(this).attr("BindName")?d=$(this).attr("Value"):"columnDefaultText"==$(this).attr("BindName")?o=$(this).attr("Value"):"columnDefaultValue"==$(this).attr("BindName")&&(f=$(this).attr("Value"))});var p=$("<div></div>"),T=$("<input type='text' style='width: 82%' readonly />");T.attr("columnDefaultType",d),T.attr("columnDefaultValue",f),T.attr("columnDefaultText",o),T.val(DefaultValueUtility.formatText(d,o));var s=$("<input class='normalbutton-v1' style='margin-left: 4px;' type='button' value='...'/>");return p.append(T).append(s),window.$Temp$Inputtxt=T,s.click(function(){JBuild4DSelectView.SelectEnvVariable.beginSelect("Column_SelectDefaultValue")}),p},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.find("input[type='text']");if(0<u.length){var r=u.attr("columnDefaultType"),d=u.attr("columnDefaultValue"),f=u.attr("columnDefaultText"),o=$("<div></div>");return o.append("<label>"+DefaultValueUtility.formatText(r,f)+"</label>"),o.append("<label IsSerialize='true' BindName='columnDefaultType' Value='"+r+"' style='display:none'/>"),o.append("<label IsSerialize='true' BindName='columnDefaultText' Value='"+f+"' style='display:none'/>"),o.append("<label IsSerialize='true' BindName='columnDefaultValue' Value='"+d+"' style='display:none'/>"),o}return $("<label></label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val();return EditTableValidate.Validate(u,t)},setSelectEnvVariableResultValue:function(e){var t=window.$Temp$Inputtxt;null!=e?(t.attr("columnDefaultType",e.Type),t.attr("columnDefaultValue",e.Value),t.attr("columnDefaultText",e.Text),t.val(DefaultValueUtility.formatText(e.Type,e.Text))):(t.attr("columnDefaultType",""),t.attr("columnDefaultValue",""),t.attr("columnDefaultText",""),t.val(""))}},Column_SelectFieldTypeDataLoader={_fieldDataTypeArray:null,GetFieldDataTypeArray:function(){if(null==this._fieldDataTypeArray){var l=this;AjaxUtility.PostSync("/Rest/Builder/DataStorage/DataBase/Table/GetTableFieldType",{},function(e){if(1==e.success){var t=JsonUtility.StringToJson(e.data);null!=t&&null!=t&&(l._fieldDataTypeArray=t)}else DialogUtility.Alert(window,"AlertLoadingQueryError",{},"加载字段类型失败！",null)},this)}return this._fieldDataTypeArray},GetFieldDataTypeObjectByValue:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Value==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")},GetFieldDataTypeObjectByText:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Text==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")}},Column_SelectFieldType={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d="",f=$("<select />");null!=r&&null!=r&&(d=r.columnDataTypeName),null!=i&&null!=i&&(d=i.attr("Value"));for(var o=Column_SelectFieldTypeDataLoader.GetFieldDataTypeArray(),p=0;p<o.length;p++){var T=o[p].Value,s=o[p].Text;f.append("<option value='"+T+"'>"+s+"</option>")}return""!=d?f.val(d):f.val(Column_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByText("字符串").Value),f},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.val(),r=Column_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByValue(u).Text;return $("<label IsSerialize='true' BindName='"+t.BindName+"' Value='"+u+"'>"+r+"</label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val();return EditTableValidate.Validate(u,t)}},EditTable_FieldName={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d="",f=t.BindName;if(null!=t.DefaultValue&&null!=t.DefaultValue)d=EditTableDefauleValue.GetValue(t);null!=r&&null!=r&&(d=r[f]),null!=i&&null!=i&&(d=i.html());var o=$("<input type='text' style='width: 98%' />");return o.val(d),o.attr("BindName",t.BindName),o.attr("Val",d),o.attr("IsSerialize","true"),o},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.val().toUpperCase();return $("<label IsSerialize='true' BindName='"+t.BindName+"' Value='"+u+"'>"+u+"</label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val(),r=EditTableValidate.Validate(u,t);return r.Success&&n.find("[renderer=EditTable_FieldName]").each(function(){$(this).find("label").each(function(){var e=$(this);e.text()!=u&&e.text()!=u.toUpperCase()||(r={Success:!1,Msg:"[字段名称]不能重复!"})})}),r}},EditTable_SelectDefaultValue={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d="",f="",o="";null!=r&&null!=r&&(d=r.fieldDefaultType?r.fieldDefaultType:"",f=r.fieldDefaultValue?r.fieldDefaultValue:"",o=r.fieldDefaultText?r.fieldDefaultText:""),null!=i&&null!=i&&i.find("label").each(function(){"fieldDefaultType"==$(this).attr("BindName")?d=$(this).attr("Value"):"fieldDefaultText"==$(this).attr("BindName")?o=$(this).attr("Value"):"fieldDefaultValue"==$(this).attr("BindName")&&(f=$(this).attr("Value"))});var p=$("<div></div>"),T=$("<input type='text' style='width: 80%' readonly />");T.attr("fieldDefaultType",d),T.attr("fieldDefaultValue",f),T.attr("fieldDefaultText",o),T.val(DefaultValueUtility.formatText(d,o));var s=$("<input class='normalbutton-v1' style='margin-left: 4px;' type='button' value='...'/>");return p.append(T).append(s),window.$Temp$Inputtxt=T,s.click(function(){window.tableDesion?tableDesion.selectDefaultValueDialogBegin(EditTable_SelectDefaultValue,null):(window.parent.listDesign.selectDefaultValueDialogBegin(window,null),window._SelectBindObj={setSelectEnvVariableResultValue:function(e){EditTable_SelectDefaultValue.setSelectEnvVariableResultValue(e)}})}),p},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.find("input[type='text']");if(0<u.length){var r=u.attr("fieldDefaultType"),d=u.attr("fieldDefaultValue"),f=u.attr("fieldDefaultText"),o=$("<div></div>");return o.append("<label>"+DefaultValueUtility.formatText(r,f)+"</label>"),o.append("<label IsSerialize='true' BindName='fieldDefaultType' Value='"+r+"' style='display:none'/>"),o.append("<label IsSerialize='true' BindName='fieldDefaultText' Value='"+f+"' style='display:none'/>"),o.append("<label IsSerialize='true' BindName='fieldDefaultValue' Value='"+d+"' style='display:none'/>"),o}return $("<label></label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val();return EditTableValidate.Validate(u,t)},setSelectEnvVariableResultValue:function(e){var t=window.$Temp$Inputtxt;null!=e?(t.attr("fieldDefaultType",e.Type),t.attr("fieldDefaultValue",e.Value),t.attr("fieldDefaultText",e.Text),t.val(DefaultValueUtility.formatText(e.Type,e.Text))):(t.attr("fieldDefaultType",""),t.attr("fieldDefaultValue",""),t.attr("fieldDefaultText",""),t.val(""))}},EditTable_SelectFieldTypeDataLoader={_fieldDataTypeArray:null,GetFieldDataTypeArray:function(){if(null==this._fieldDataTypeArray){var l=this;AjaxUtility.PostSync("/Rest/Builder/DataStorage/DataBase/Table/GetTableFieldType",{},function(e){if(1==e.success){var t=JsonUtility.StringToJson(e.data);null!=t&&null!=t&&(l._fieldDataTypeArray=t)}else DialogUtility.Alert(window,"AlertLoadingQueryError",{},"加载字段类型失败！",null)},this)}return this._fieldDataTypeArray},GetFieldDataTypeObjectByValue:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Value==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")},GetFieldDataTypeObjectByText:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Text==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")}},EditTable_SelectFieldType={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d="",f=$("<select />");null!=r&&null!=r&&(d=r.fieldDataType),null!=i&&null!=i&&(d=i.attr("Value"));for(var o=EditTable_SelectFieldTypeDataLoader.GetFieldDataTypeArray(),p=0;p<o.length;p++){var T=o[p].Value,s=o[p].Text;f.append("<option value='"+T+"'>"+s+"</option>")}return""!=d?f.val(d):f.val(EditTable_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByText("字符串").Value),f.change(function(){var e=$(this).val();"整数"==e?($(l).next().find("input").attr("disabled",!0),$(l).next().find("input").val(0),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0)):"小数"==e?($(l).next().find("input").attr("disabled",!1),$(l).next().find("input").val(10),$(l).next().next().find("input").attr("disabled",!1),$(l).next().next().find("input").val(2)):"日期时间"==e?($(l).next().find("input").attr("disabled",!0),$(l).next().find("input").val(20),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0)):"字符串"==e?($(l).next().find("input").attr("disabled",!1),$(l).next().find("input").val(50),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0)):"长字符串"==e&&($(l).next().find("input").attr("disabled",!0),$(l).next().find("input").val(0),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0))}),f},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.val(),r=EditTable_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByValue(u).Text;return $("<label IsSerialize='true' BindName='"+t.BindName+"' Value='"+u+"'>"+r+"</label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val();return EditTableValidate.Validate(u,t)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlbmRlcmVycy9EYXRhU2V0L0NvbHVtbl9SVFRhYmxlSXNNYWluLmpzIiwiUmVuZGVyZXJzL0RhdGFTZXQvQ29sdW1uX1NlbGVjdERlZmF1bHRWYWx1ZS5qcyIsIlJlbmRlcmVycy9EYXRhU2V0L0NvbHVtbl9TZWxlY3RGaWVsZFR5cGUuanMiLCJSZW5kZXJlcnMvVGFibGVEZXNpZ24vRWRpdFRhYmxlX0ZpZWxkTmFtZS5qcyIsIlJlbmRlcmVycy9UYWJsZURlc2lnbi9FZGl0VGFibGVfU2VsZWN0RGVmYXVsdFZhbHVlLmpzIiwiUmVuZGVyZXJzL1RhYmxlRGVzaWduL0VkaXRUYWJsZV9TZWxlY3RGaWVsZFR5cGUuanMiXSwibmFtZXMiOlsiQ29sdW1uX1JUVGFibGVJc01haW4iLCJHZXRfRWRpdFN0YXR1c19IdG1sRWxlbSIsIl9jb25maWciLCJ0ZW1wbGF0ZSIsImhvc3RDZWxsIiwiaG9zdFJvdyIsImhvc3RUYWJsZSIsInZpZXdTdGF1c0h0bWxFbGVtIiwianNvbkRhdGFzIiwianNvbkRhdGFTaW5nbGUiLCJjb25maWdTb3VyY2UiLCJWYWx1ZSIsIlRleHQiLCJ2YWwiLCJiaW5kbmFtZSIsIkJpbmROYW1lIiwidW5kZWZpbmVkIiwiRGVmYXVsdFZhbHVlIiwiRWRpdFRhYmxlRGVmYXVsZVZhbHVlIiwiR2V0VmFsdWUiLCJhdHRyIiwiJGVsZW0iLCIkIiwiaSIsImxlbmd0aCIsIml0ZW0iLCJhcHBlbmQiLCJDaGFuZ2VFdmVudCIsImNoYW5nZSIsInRoaXMiLCJHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtIiwiZWRpdFN0YXVzSHRtbEVsZW0iLCJmaW5kIiwidGV4dCIsIlZhbGlkYXRlVG9Db21wbGV0ZWRFbmFibGUiLCJFZGl0VGFibGVWYWxpZGF0ZSIsIlZhbGlkYXRlIiwiQ29sdW1uX1NlbGVjdERlZmF1bHRWYWx1ZSIsImRlZmF1bHRUeXBlIiwiZGVmYXVsdFZhbHVlIiwiZGVmYXVsdFRleHQiLCJlYWNoIiwiJGlucHV0VHh0IiwiRGVmYXVsdFZhbHVlVXRpbGl0eSIsImZvcm1hdFRleHQiLCIkaW5wdXRCdG4iLCJ3aW5kb3ciLCIkVGVtcCRJbnB1dHR4dCIsImNsaWNrIiwiSkJ1aWxkNERTZWxlY3RWaWV3IiwiU2VsZWN0RW52VmFyaWFibGUiLCJiZWdpblNlbGVjdCIsInNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWUiLCJkZWZhdWx0RGF0YSIsIlR5cGUiLCJDb2x1bW5fU2VsZWN0RmllbGRUeXBlRGF0YUxvYWRlciIsIl9maWVsZERhdGFUeXBlQXJyYXkiLCJHZXRGaWVsZERhdGFUeXBlQXJyYXkiLCJfc2VsZiIsIkFqYXhVdGlsaXR5IiwiUG9zdFN5bmMiLCJkYXRhIiwic3VjY2VzcyIsImxpc3QiLCJKc29uVXRpbGl0eSIsIlN0cmluZ1RvSnNvbiIsIkRpYWxvZ1V0aWxpdHkiLCJBbGVydCIsIkdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVZhbHVlIiwiYXJyYXlEYXRhIiwib2JqIiwiYWxlcnQiLCJHZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlUZXh0IiwiQ29sdW1uX1NlbGVjdEZpZWxkVHlwZSIsInZhbHVlIiwiRWRpdFRhYmxlX0ZpZWxkTmFtZSIsImh0bWwiLCJ0b1VwcGVyQ2FzZSIsInJlc3VsdCIsIlN1Y2Nlc3MiLCJsYWJlbGl0ZW0iLCJNc2ciLCJFZGl0VGFibGVfU2VsZWN0RGVmYXVsdFZhbHVlIiwiZmllbGREZWZhdWx0VHlwZSIsImZpZWxkRGVmYXVsdFZhbHVlIiwiZmllbGREZWZhdWx0VGV4dCIsInRhYmxlRGVzaW9uIiwic2VsZWN0RGVmYXVsdFZhbHVlRGlhbG9nQmVnaW4iLCJwYXJlbnQiLCJsaXN0RGVzaWduIiwiX1NlbGVjdEJpbmRPYmoiLCJFZGl0VGFibGVfU2VsZWN0RmllbGRUeXBlRGF0YUxvYWRlciIsIkVkaXRUYWJsZV9TZWxlY3RGaWVsZFR5cGUiLCJuZXh0Il0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLElBQUFBLHFCQUFBLENBQ0FDLHdCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFD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QSxTQUFBWixLQUFBLFlBQUEsR0FDQUUsRUFBQWxCLEdBQUF5RixPQUFBN0QsS0FBQSxTQUFBbkIsSUFBQSxJQUNBUyxFQUFBbEIsR0FBQXlGLE9BQUFBLE9BQUE3RCxLQUFBLFNBQUFaLEtBQUEsWUFBQSxHQUNBRSxFQUFBbEIsR0FBQXlGLE9BQUFBLE9BQUE3RCxLQUFBLFNBQUFuQixJQUFBLElBQ0EsUUFBQUEsSUFDQVMsRUFBQWxCLEdBQUF5RixPQUFBN0QsS0FBQSxTQUFBWixLQUFBLFlBQUEsR0FDQUUsRUFBQWxCLEdBQUF5RixPQUFBN0QsS0FBQSxTQUFBbkIsSUFBQSxHQUNBUyxFQUFBbEIsR0FBQXlGLE9BQUFBLE9BQUE3RCxLQUFBLFNBQUFaLEtBQUEsWUFBQSxHQUNBRSxFQUFBbEIsR0FBQXlGLE9BQUFBLE9BQUE3RCxLQUFBLFNBQUFuQixJQUFBLE1BR0FRLEdBRUFTLDZCQUFBLFNBQUE1QixFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBeUIsR0FDQSxJQUFBMkMsRUFBQTNDLEVBQUFsQixNQUNBb0IsRUFBQTBELG9DQUFBdkIsOEJBQUFNLEdBQUE5RCxLQUVBLE9BREFVLEVBQUEsdUNBQUFuQixFQUFBWSxTQUFBLFlBQUEyRCxFQUFBLEtBQUF6QyxFQUFBLGFBR0FDLDBCQUFBLFNBQUFoQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBeUIsR0FDQSxJQUFBbEIsRUFBQWtCLEVBQUFsQixNQUNBLE9BQUFzQixrQkFBQUMsU0FBQXZCLEVBQUFWIiwiZmlsZSI6IlVJRVhDb21wb25lbnRGb3JCdWlsZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBDb2x1bW5fUlRUYWJsZUlzTWFpbiA9IHtcbiAgR2V0X0VkaXRTdGF0dXNfSHRtbEVsZW06IGZ1bmN0aW9uIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCB2aWV3U3RhdXNIdG1sRWxlbSwganNvbkRhdGFzLCBqc29uRGF0YVNpbmdsZSkge1xuICAgIHZhciBjb25maWdTb3VyY2UgPSBbe1xuICAgICAgXCJWYWx1ZVwiOiBcIuaYr1wiLFxuICAgICAgXCJUZXh0XCI6IFwi5pivXCJcbiAgICB9LCB7XG4gICAgICBcIlZhbHVlXCI6IFwi5ZCmXCIsXG4gICAgICBcIlRleHRcIjogXCLlkKZcIlxuICAgIH1dO1xuICAgIHZhciB2YWwgPSBcIlwiO1xuICAgIHZhciB0eHQgPSBcIlwiO1xuICAgIHZhciBiaW5kbmFtZSA9IHRlbXBsYXRlLkJpbmROYW1lO1xuXG4gICAgaWYgKHRlbXBsYXRlLkRlZmF1bHRWYWx1ZSAhPSB1bmRlZmluZWQgJiYgdGVtcGxhdGUuRGVmYXVsdFZhbHVlICE9IG51bGwpIHtcbiAgICAgIHZhciB2YWwgPSBFZGl0VGFibGVEZWZhdWxlVmFsdWUuR2V0VmFsdWUodGVtcGxhdGUpO1xuICAgIH1cblxuICAgIGlmIChqc29uRGF0YVNpbmdsZSAhPSBudWxsICYmIGpzb25EYXRhU2luZ2xlICE9IHVuZGVmaW5lZCkge1xuICAgICAgdmFsID0ganNvbkRhdGFTaW5nbGVbYmluZG5hbWVdO1xuICAgIH1cblxuICAgIGlmICh2aWV3U3RhdXNIdG1sRWxlbSAhPSBudWxsICYmIHZpZXdTdGF1c0h0bWxFbGVtICE9IHVuZGVmaW5lZCkge1xuICAgICAgdmFsID0gdmlld1N0YXVzSHRtbEVsZW0uYXR0cihcIlZhbHVlXCIpO1xuICAgIH1cblxuICAgIHZhciAkZWxlbSA9ICQoXCI8c2VsZWN0IHN0eWxlPSd3aWR0aDogMTAwJScgLz5cIik7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbmZpZ1NvdXJjZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBjb25maWdTb3VyY2VbaV07XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPSdcIiArIGl0ZW0uVmFsdWUgKyBcIicgdGV4dD0nXCIgKyBpdGVtLlRleHQgKyBcIic+XCIgKyBpdGVtLlRleHQgKyBcIjwvb3B0aW9uPlwiKTtcbiAgICB9XG5cbiAgICAkZWxlbS52YWwodmFsKTtcblxuICAgIGlmICh0eXBlb2YgdGVtcGxhdGUuQ2hhbmdlRXZlbnQgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAkZWxlbS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB0ZW1wbGF0ZS5DaGFuZ2VFdmVudCh0aGlzLCBfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgdmlld1N0YXVzSHRtbEVsZW0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICRlbGVtO1xuICB9LFxuICBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWwgPSBlZGl0U3RhdXNIdG1sRWxlbS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLmF0dHIoXCJWYWx1ZVwiKTtcbiAgICB2YXIgdGV4dCA9IGVkaXRTdGF1c0h0bWxFbGVtLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikuYXR0cihcIlRleHRcIik7XG5cbiAgICBpZiAoIXZhbCkge1xuICAgICAgdmFsID0gXCJcIjtcbiAgICB9XG5cbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIHRleHQgPSBcIlwiO1xuICAgIH1cblxuICAgIHZhciAkZWxlbSA9ICQoXCI8bGFiZWwgSXNTZXJpYWxpemU9J3RydWUnIEJpbmROYW1lPSdcIiArIHRlbXBsYXRlLkJpbmROYW1lICsgXCInIFZhbHVlPSdcIiArIHZhbCArIFwiJyBUZXh0PSdcIiArIHRleHQgKyBcIic+XCIgKyB0ZXh0ICsgXCI8L2xhYmVsPlwiKTtcbiAgICByZXR1cm4gJGVsZW07XG4gIH0sXG4gIFZhbGlkYXRlVG9Db21wbGV0ZWRFbmFibGU6IGZ1bmN0aW9uIFZhbGlkYXRlVG9Db21wbGV0ZWRFbmFibGUoX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIGVkaXRTdGF1c0h0bWxFbGVtKSB7XG4gICAgdmFyIHZhbCA9IGVkaXRTdGF1c0h0bWxFbGVtLnZhbCgpO1xuICAgIHJldHVybiBFZGl0VGFibGVWYWxpZGF0ZS5WYWxpZGF0ZSh2YWwsIHRlbXBsYXRlKTtcbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIENvbHVtbl9TZWxlY3REZWZhdWx0VmFsdWUgPSB7XG4gIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfRWRpdFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgdmlld1N0YXVzSHRtbEVsZW0sIGpzb25EYXRhcywganNvbkRhdGFTaW5nbGUpIHtcbiAgICB2YXIgZGVmYXVsdFR5cGUgPSBcIlwiO1xuICAgIHZhciBkZWZhdWx0VmFsdWUgPSBcIlwiO1xuICAgIHZhciBkZWZhdWx0VGV4dCA9IFwiXCI7XG5cbiAgICBpZiAoanNvbkRhdGFTaW5nbGUgIT0gbnVsbCAmJiBqc29uRGF0YVNpbmdsZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIGRlZmF1bHRUeXBlID0ganNvbkRhdGFTaW5nbGVbXCJjb2x1bW5EZWZhdWx0VHlwZVwiXSA/IGpzb25EYXRhU2luZ2xlW1wiY29sdW1uRGVmYXVsdFR5cGVcIl0gOiBcIlwiO1xuICAgICAgZGVmYXVsdFZhbHVlID0ganNvbkRhdGFTaW5nbGVbXCJjb2x1bW5EZWZhdWx0VmFsdWVcIl0gPyBqc29uRGF0YVNpbmdsZVtcImNvbHVtbkRlZmF1bHRWYWx1ZVwiXSA6IFwiXCI7XG4gICAgICBkZWZhdWx0VGV4dCA9IGpzb25EYXRhU2luZ2xlW1wiY29sdW1uRGVmYXVsdFRleHRcIl0gPyBqc29uRGF0YVNpbmdsZVtcImNvbHVtbkRlZmF1bHRUZXh0XCJdIDogXCJcIjtcbiAgICB9XG5cbiAgICBpZiAodmlld1N0YXVzSHRtbEVsZW0gIT0gbnVsbCAmJiB2aWV3U3RhdXNIdG1sRWxlbSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZXdTdGF1c0h0bWxFbGVtLmZpbmQoXCJsYWJlbFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cihcIkJpbmROYW1lXCIpID09IFwiY29sdW1uRGVmYXVsdFR5cGVcIikge1xuICAgICAgICAgIGRlZmF1bHRUeXBlID0gJCh0aGlzKS5hdHRyKFwiVmFsdWVcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKFwiQmluZE5hbWVcIikgPT0gXCJjb2x1bW5EZWZhdWx0VGV4dFwiKSB7XG4gICAgICAgICAgZGVmYXVsdFRleHQgPSAkKHRoaXMpLmF0dHIoXCJWYWx1ZVwiKTtcbiAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmF0dHIoXCJCaW5kTmFtZVwiKSA9PSBcImNvbHVtbkRlZmF1bHRWYWx1ZVwiKSB7XG4gICAgICAgICAgZGVmYXVsdFZhbHVlID0gJCh0aGlzKS5hdHRyKFwiVmFsdWVcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciAkZWxlbSA9ICQoXCI8ZGl2PjwvZGl2PlwiKTtcbiAgICB2YXIgJGlucHV0VHh0ID0gJChcIjxpbnB1dCB0eXBlPSd0ZXh0JyBzdHlsZT0nd2lkdGg6IDgyJScgcmVhZG9ubHkgLz5cIik7XG4gICAgJGlucHV0VHh0LmF0dHIoXCJjb2x1bW5EZWZhdWx0VHlwZVwiLCBkZWZhdWx0VHlwZSk7XG4gICAgJGlucHV0VHh0LmF0dHIoXCJjb2x1bW5EZWZhdWx0VmFsdWVcIiwgZGVmYXVsdFZhbHVlKTtcbiAgICAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRUZXh0XCIsIGRlZmF1bHRUZXh0KTtcbiAgICAkaW5wdXRUeHQudmFsKERlZmF1bHRWYWx1ZVV0aWxpdHkuZm9ybWF0VGV4dChkZWZhdWx0VHlwZSwgZGVmYXVsdFRleHQpKTtcbiAgICB2YXIgJGlucHV0QnRuID0gJChcIjxpbnB1dCBjbGFzcz0nbm9ybWFsYnV0dG9uLXYxJyBzdHlsZT0nbWFyZ2luLWxlZnQ6IDRweDsnIHR5cGU9J2J1dHRvbicgdmFsdWU9Jy4uLicvPlwiKTtcbiAgICAkZWxlbS5hcHBlbmQoJGlucHV0VHh0KS5hcHBlbmQoJGlucHV0QnRuKTtcbiAgICB3aW5kb3cuJFRlbXAkSW5wdXR0eHQgPSAkaW5wdXRUeHQ7XG4gICAgJGlucHV0QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgIEpCdWlsZDREU2VsZWN0Vmlldy5TZWxlY3RFbnZWYXJpYWJsZS5iZWdpblNlbGVjdChcIkNvbHVtbl9TZWxlY3REZWZhdWx0VmFsdWVcIik7XG4gICAgfSk7XG4gICAgcmV0dXJuICRlbGVtO1xuICB9LFxuICBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciAkaW5wdXRUeHQgPSBlZGl0U3RhdXNIdG1sRWxlbS5maW5kKFwiaW5wdXRbdHlwZT0ndGV4dCddXCIpO1xuXG4gICAgaWYgKCRpbnB1dFR4dC5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgZGVmYXVsdFR5cGUgPSAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRUeXBlXCIpO1xuICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9ICRpbnB1dFR4dC5hdHRyKFwiY29sdW1uRGVmYXVsdFZhbHVlXCIpO1xuICAgICAgdmFyIGRlZmF1bHRUZXh0ID0gJGlucHV0VHh0LmF0dHIoXCJjb2x1bW5EZWZhdWx0VGV4dFwiKTtcbiAgICAgIHZhciAkZWxlbSA9ICQoXCI8ZGl2PjwvZGl2PlwiKTtcbiAgICAgICRlbGVtLmFwcGVuZChcIjxsYWJlbD5cIiArIERlZmF1bHRWYWx1ZVV0aWxpdHkuZm9ybWF0VGV4dChkZWZhdWx0VHlwZSwgZGVmYXVsdFRleHQpICsgXCI8L2xhYmVsPlwiKTtcbiAgICAgICRlbGVtLmFwcGVuZChcIjxsYWJlbCBJc1NlcmlhbGl6ZT0ndHJ1ZScgQmluZE5hbWU9J2NvbHVtbkRlZmF1bHRUeXBlJyBWYWx1ZT0nXCIgKyBkZWZhdWx0VHlwZSArIFwiJyBzdHlsZT0nZGlzcGxheTpub25lJy8+XCIpO1xuICAgICAgJGVsZW0uYXBwZW5kKFwiPGxhYmVsIElzU2VyaWFsaXplPSd0cnVlJyBCaW5kTmFtZT0nY29sdW1uRGVmYXVsdFRleHQnIFZhbHVlPSdcIiArIGRlZmF1bHRUZXh0ICsgXCInIHN0eWxlPSdkaXNwbGF5Om5vbmUnLz5cIik7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8bGFiZWwgSXNTZXJpYWxpemU9J3RydWUnIEJpbmROYW1lPSdjb2x1bW5EZWZhdWx0VmFsdWUnIFZhbHVlPSdcIiArIGRlZmF1bHRWYWx1ZSArIFwiJyBzdHlsZT0nZGlzcGxheTpub25lJy8+XCIpO1xuICAgICAgcmV0dXJuICRlbGVtO1xuICAgIH1cblxuICAgIHJldHVybiAkKFwiPGxhYmVsPjwvbGFiZWw+XCIpO1xuICB9LFxuICBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlOiBmdW5jdGlvbiBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWwgPSBlZGl0U3RhdXNIdG1sRWxlbS52YWwoKTtcbiAgICByZXR1cm4gRWRpdFRhYmxlVmFsaWRhdGUuVmFsaWRhdGUodmFsLCB0ZW1wbGF0ZSk7XG4gIH0sXG4gIHNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWU6IGZ1bmN0aW9uIHNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWUoZGVmYXVsdERhdGEpIHtcbiAgICB2YXIgJGlucHV0VHh0ID0gd2luZG93LiRUZW1wJElucHV0dHh0O1xuXG4gICAgaWYgKG51bGwgIT0gZGVmYXVsdERhdGEpIHtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiY29sdW1uRGVmYXVsdFR5cGVcIiwgZGVmYXVsdERhdGEuVHlwZSk7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRWYWx1ZVwiLCBkZWZhdWx0RGF0YS5WYWx1ZSk7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRUZXh0XCIsIGRlZmF1bHREYXRhLlRleHQpO1xuICAgICAgJGlucHV0VHh0LnZhbChEZWZhdWx0VmFsdWVVdGlsaXR5LmZvcm1hdFRleHQoZGVmYXVsdERhdGEuVHlwZSwgZGVmYXVsdERhdGEuVGV4dCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRUeXBlXCIsIFwiXCIpO1xuICAgICAgJGlucHV0VHh0LmF0dHIoXCJjb2x1bW5EZWZhdWx0VmFsdWVcIiwgXCJcIik7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRUZXh0XCIsIFwiXCIpO1xuICAgICAgJGlucHV0VHh0LnZhbChcIlwiKTtcbiAgICB9XG4gIH1cbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBDb2x1bW5fU2VsZWN0RmllbGRUeXBlRGF0YUxvYWRlciA9IHtcbiAgX2ZpZWxkRGF0YVR5cGVBcnJheTogbnVsbCxcbiAgR2V0RmllbGREYXRhVHlwZUFycmF5OiBmdW5jdGlvbiBHZXRGaWVsZERhdGFUeXBlQXJyYXkoKSB7XG4gICAgaWYgKHRoaXMuX2ZpZWxkRGF0YVR5cGVBcnJheSA9PSBudWxsKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXG4gICAgICBBamF4VXRpbGl0eS5Qb3N0U3luYyhcIi9SZXN0L0J1aWxkZXIvRGF0YVN0b3JhZ2UvRGF0YUJhc2UvVGFibGUvR2V0VGFibGVGaWVsZFR5cGVcIiwge30sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MgPT0gdHJ1ZSkge1xuICAgICAgICAgIHZhciBsaXN0ID0gSnNvblV0aWxpdHkuU3RyaW5nVG9Kc29uKGRhdGEuZGF0YSk7XG5cbiAgICAgICAgICBpZiAobGlzdCAhPSBudWxsICYmIGxpc3QgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfc2VsZi5fZmllbGREYXRhVHlwZUFycmF5ID0gbGlzdDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgRGlhbG9nVXRpbGl0eS5BbGVydCh3aW5kb3csIFwiQWxlcnRMb2FkaW5nUXVlcnlFcnJvclwiLCB7fSwgXCLliqDovb3lrZfmrrXnsbvlnovlpLHotKXvvIFcIiwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9maWVsZERhdGFUeXBlQXJyYXk7XG4gIH0sXG4gIEdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVZhbHVlOiBmdW5jdGlvbiBHZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlWYWx1ZShWYWx1ZSkge1xuICAgIHZhciBhcnJheURhdGEgPSB0aGlzLkdldEZpZWxkRGF0YVR5cGVBcnJheSgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheURhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvYmogPSBhcnJheURhdGFbaV07XG5cbiAgICAgIGlmIChvYmouVmFsdWUgPT0gVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhbGVydChcIuaJvuS4jeWIsOaMh+WumueahOaVsOaNruexu+Wei++8jOivt+ehruiupOaYr+WQpuaUr+aMgeivpeexu+Wei++8gVwiKTtcbiAgfSxcbiAgR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VGV4dDogZnVuY3Rpb24gR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VGV4dCh0ZXh0KSB7XG4gICAgdmFyIGFycmF5RGF0YSA9IHRoaXMuR2V0RmllbGREYXRhVHlwZUFycmF5KCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5RGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG9iaiA9IGFycmF5RGF0YVtpXTtcblxuICAgICAgaWYgKG9iai5UZXh0ID09IHRleHQpIHtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhbGVydChcIuaJvuS4jeWIsOaMh+WumueahOaVsOaNruexu+Wei++8jOivt+ehruiupOaYr+WQpuaUr+aMgeivpeexu+Wei++8gVwiKTtcbiAgfVxufTtcbnZhciBDb2x1bW5fU2VsZWN0RmllbGRUeXBlID0ge1xuICBHZXRfRWRpdFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0VkaXRTdGF0dXNfSHRtbEVsZW0oX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIHZpZXdTdGF1c0h0bWxFbGVtLCBqc29uRGF0YXMsIGpzb25EYXRhU2luZ2xlKSB7XG4gICAgdmFyIHZhbCA9IFwiXCI7XG4gICAgdmFyICRlbGVtID0gJChcIjxzZWxlY3QgLz5cIik7XG5cbiAgICBpZiAoanNvbkRhdGFTaW5nbGUgIT0gbnVsbCAmJiBqc29uRGF0YVNpbmdsZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbCA9IGpzb25EYXRhU2luZ2xlW1wiY29sdW1uRGF0YVR5cGVOYW1lXCJdO1xuICAgIH1cblxuICAgIGlmICh2aWV3U3RhdXNIdG1sRWxlbSAhPSBudWxsICYmIHZpZXdTdGF1c0h0bWxFbGVtICE9IHVuZGVmaW5lZCkge1xuICAgICAgdmFsID0gdmlld1N0YXVzSHRtbEVsZW0uYXR0cihcIlZhbHVlXCIpO1xuICAgIH1cblxuICAgIHZhciBfZmllbGREYXRhVHlwZUFycmF5ID0gQ29sdW1uX1NlbGVjdEZpZWxkVHlwZURhdGFMb2FkZXIuR2V0RmllbGREYXRhVHlwZUFycmF5KCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9maWVsZERhdGFUeXBlQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IF9maWVsZERhdGFUeXBlQXJyYXlbaV0uVmFsdWU7XG4gICAgICB2YXIgdGV4dCA9IF9maWVsZERhdGFUeXBlQXJyYXlbaV0uVGV4dDtcbiAgICAgICRlbGVtLmFwcGVuZChcIjxvcHRpb24gdmFsdWU9J1wiICsgdmFsdWUgKyBcIic+XCIgKyB0ZXh0ICsgXCI8L29wdGlvbj5cIik7XG4gICAgfVxuXG4gICAgaWYgKHZhbCAhPSBcIlwiKSB7XG4gICAgICAkZWxlbS52YWwodmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW0udmFsKENvbHVtbl9TZWxlY3RGaWVsZFR5cGVEYXRhTG9hZGVyLkdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVRleHQoXCLlrZfnrKbkuLJcIikuVmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiAkZWxlbTtcbiAgfSxcbiAgR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgdmFsdWUgPSBlZGl0U3RhdXNIdG1sRWxlbS52YWwoKTtcbiAgICB2YXIgdGV4dCA9IENvbHVtbl9TZWxlY3RGaWVsZFR5cGVEYXRhTG9hZGVyLkdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVZhbHVlKHZhbHVlKS5UZXh0O1xuICAgIHZhciAkZWxlbSA9ICQoXCI8bGFiZWwgSXNTZXJpYWxpemU9J3RydWUnIEJpbmROYW1lPSdcIiArIHRlbXBsYXRlLkJpbmROYW1lICsgXCInIFZhbHVlPSdcIiArIHZhbHVlICsgXCInPlwiICsgdGV4dCArIFwiPC9sYWJlbD5cIik7XG4gICAgcmV0dXJuICRlbGVtO1xuICB9LFxuICBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlOiBmdW5jdGlvbiBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWwgPSBlZGl0U3RhdXNIdG1sRWxlbS52YWwoKTtcbiAgICByZXR1cm4gRWRpdFRhYmxlVmFsaWRhdGUuVmFsaWRhdGUodmFsLCB0ZW1wbGF0ZSk7XG4gIH1cbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBFZGl0VGFibGVfRmllbGROYW1lID0ge1xuICBHZXRfRWRpdFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0VkaXRTdGF0dXNfSHRtbEVsZW0oX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIHZpZXdTdGF1c0h0bWxFbGVtLCBqc29uRGF0YXMsIGpzb25EYXRhU2luZ2xlKSB7XG4gICAgdmFyIHZhbCA9IFwiXCI7XG4gICAgdmFyIGJpbmRuYW1lID0gdGVtcGxhdGUuQmluZE5hbWU7XG5cbiAgICBpZiAodGVtcGxhdGUuRGVmYXVsdFZhbHVlICE9IHVuZGVmaW5lZCAmJiB0ZW1wbGF0ZS5EZWZhdWx0VmFsdWUgIT0gbnVsbCkge1xuICAgICAgdmFyIHZhbCA9IEVkaXRUYWJsZURlZmF1bGVWYWx1ZS5HZXRWYWx1ZSh0ZW1wbGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKGpzb25EYXRhU2luZ2xlICE9IG51bGwgJiYganNvbkRhdGFTaW5nbGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWwgPSBqc29uRGF0YVNpbmdsZVtiaW5kbmFtZV07XG4gICAgfVxuXG4gICAgaWYgKHZpZXdTdGF1c0h0bWxFbGVtICE9IG51bGwgJiYgdmlld1N0YXVzSHRtbEVsZW0gIT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWwgPSB2aWV3U3RhdXNIdG1sRWxlbS5odG1sKCk7XG4gICAgfVxuXG4gICAgdmFyICRlbGVtID0gJChcIjxpbnB1dCB0eXBlPSd0ZXh0JyBzdHlsZT0nd2lkdGg6IDk4JScgLz5cIik7XG4gICAgJGVsZW0udmFsKHZhbCk7XG4gICAgJGVsZW0uYXR0cihcIkJpbmROYW1lXCIsIHRlbXBsYXRlLkJpbmROYW1lKTtcbiAgICAkZWxlbS5hdHRyKFwiVmFsXCIsIHZhbCk7XG4gICAgJGVsZW0uYXR0cihcIklzU2VyaWFsaXplXCIsIFwidHJ1ZVwiKTtcbiAgICByZXR1cm4gJGVsZW07XG4gIH0sXG4gIEdldF9Db21wbGV0ZWRTdGF0dXNfSHRtbEVsZW06IGZ1bmN0aW9uIEdldF9Db21wbGV0ZWRTdGF0dXNfSHRtbEVsZW0oX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIGVkaXRTdGF1c0h0bWxFbGVtKSB7XG4gICAgdmFyIHZhbCA9IGVkaXRTdGF1c0h0bWxFbGVtLnZhbCgpLnRvVXBwZXJDYXNlKCk7XG4gICAgdmFyICRlbGVtID0gJChcIjxsYWJlbCBJc1NlcmlhbGl6ZT0ndHJ1ZScgQmluZE5hbWU9J1wiICsgdGVtcGxhdGUuQmluZE5hbWUgKyBcIicgVmFsdWU9J1wiICsgdmFsICsgXCInPlwiICsgdmFsICsgXCI8L2xhYmVsPlwiKTtcbiAgICByZXR1cm4gJGVsZW07XG4gIH0sXG4gIFZhbGlkYXRlVG9Db21wbGV0ZWRFbmFibGU6IGZ1bmN0aW9uIFZhbGlkYXRlVG9Db21wbGV0ZWRFbmFibGUoX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIGVkaXRTdGF1c0h0bWxFbGVtKSB7XG4gICAgdmFyIHZhbCA9IGVkaXRTdGF1c0h0bWxFbGVtLnZhbCgpO1xuICAgIHZhciByZXN1bHQgPSBFZGl0VGFibGVWYWxpZGF0ZS5WYWxpZGF0ZSh2YWwsIHRlbXBsYXRlKTtcblxuICAgIGlmIChyZXN1bHQuU3VjY2Vzcykge1xuICAgICAgaG9zdFRhYmxlLmZpbmQoXCJbcmVuZGVyZXI9RWRpdFRhYmxlX0ZpZWxkTmFtZV1cIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZXJpdGVtID0gJCh0aGlzKTtcbiAgICAgICAgc2VyaXRlbS5maW5kKFwibGFiZWxcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGxhYmVsaXRlbSA9ICQodGhpcyk7XG5cbiAgICAgICAgICBpZiAobGFiZWxpdGVtLnRleHQoKSA9PSB2YWwgfHwgbGFiZWxpdGVtLnRleHQoKSA9PSB2YWwudG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICBTdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgTXNnOiBcIlvlrZfmrrXlkI3np7Bd5LiN6IO96YeN5aSNIVwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgRWRpdFRhYmxlX1NlbGVjdERlZmF1bHRWYWx1ZSA9IHtcbiAgR2V0X0VkaXRTdGF0dXNfSHRtbEVsZW06IGZ1bmN0aW9uIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCB2aWV3U3RhdXNIdG1sRWxlbSwganNvbkRhdGFzLCBqc29uRGF0YVNpbmdsZSkge1xuICAgIHZhciBmaWVsZERlZmF1bHRUeXBlID0gXCJcIjtcbiAgICB2YXIgZmllbGREZWZhdWx0VmFsdWUgPSBcIlwiO1xuICAgIHZhciBmaWVsZERlZmF1bHRUZXh0ID0gXCJcIjtcblxuICAgIGlmIChqc29uRGF0YVNpbmdsZSAhPSBudWxsICYmIGpzb25EYXRhU2luZ2xlICE9IHVuZGVmaW5lZCkge1xuICAgICAgZmllbGREZWZhdWx0VHlwZSA9IGpzb25EYXRhU2luZ2xlW1wiZmllbGREZWZhdWx0VHlwZVwiXSA/IGpzb25EYXRhU2luZ2xlW1wiZmllbGREZWZhdWx0VHlwZVwiXSA6IFwiXCI7XG4gICAgICBmaWVsZERlZmF1bHRWYWx1ZSA9IGpzb25EYXRhU2luZ2xlW1wiZmllbGREZWZhdWx0VmFsdWVcIl0gPyBqc29uRGF0YVNpbmdsZVtcImZpZWxkRGVmYXVsdFZhbHVlXCJdIDogXCJcIjtcbiAgICAgIGZpZWxkRGVmYXVsdFRleHQgPSBqc29uRGF0YVNpbmdsZVtcImZpZWxkRGVmYXVsdFRleHRcIl0gPyBqc29uRGF0YVNpbmdsZVtcImZpZWxkRGVmYXVsdFRleHRcIl0gOiBcIlwiO1xuICAgIH1cblxuICAgIGlmICh2aWV3U3RhdXNIdG1sRWxlbSAhPSBudWxsICYmIHZpZXdTdGF1c0h0bWxFbGVtICE9IHVuZGVmaW5lZCkge1xuICAgICAgdmlld1N0YXVzSHRtbEVsZW0uZmluZChcImxhYmVsXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKFwiQmluZE5hbWVcIikgPT0gXCJmaWVsZERlZmF1bHRUeXBlXCIpIHtcbiAgICAgICAgICBmaWVsZERlZmF1bHRUeXBlID0gJCh0aGlzKS5hdHRyKFwiVmFsdWVcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKFwiQmluZE5hbWVcIikgPT0gXCJmaWVsZERlZmF1bHRUZXh0XCIpIHtcbiAgICAgICAgICBmaWVsZERlZmF1bHRUZXh0ID0gJCh0aGlzKS5hdHRyKFwiVmFsdWVcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKFwiQmluZE5hbWVcIikgPT0gXCJmaWVsZERlZmF1bHRWYWx1ZVwiKSB7XG4gICAgICAgICAgZmllbGREZWZhdWx0VmFsdWUgPSAkKHRoaXMpLmF0dHIoXCJWYWx1ZVwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyICRlbGVtID0gJChcIjxkaXY+PC9kaXY+XCIpO1xuICAgIHZhciAkaW5wdXRUeHQgPSAkKFwiPGlucHV0IHR5cGU9J3RleHQnIHN0eWxlPSd3aWR0aDogODAlJyByZWFkb25seSAvPlwiKTtcbiAgICAkaW5wdXRUeHQuYXR0cihcImZpZWxkRGVmYXVsdFR5cGVcIiwgZmllbGREZWZhdWx0VHlwZSk7XG4gICAgJGlucHV0VHh0LmF0dHIoXCJmaWVsZERlZmF1bHRWYWx1ZVwiLCBmaWVsZERlZmF1bHRWYWx1ZSk7XG4gICAgJGlucHV0VHh0LmF0dHIoXCJmaWVsZERlZmF1bHRUZXh0XCIsIGZpZWxkRGVmYXVsdFRleHQpO1xuICAgICRpbnB1dFR4dC52YWwoRGVmYXVsdFZhbHVlVXRpbGl0eS5mb3JtYXRUZXh0KGZpZWxkRGVmYXVsdFR5cGUsIGZpZWxkRGVmYXVsdFRleHQpKTtcbiAgICB2YXIgJGlucHV0QnRuID0gJChcIjxpbnB1dCBjbGFzcz0nbm9ybWFsYnV0dG9uLXYxJyBzdHlsZT0nbWFyZ2luLWxlZnQ6IDRweDsnIHR5cGU9J2J1dHRvbicgdmFsdWU9Jy4uLicvPlwiKTtcbiAgICAkZWxlbS5hcHBlbmQoJGlucHV0VHh0KS5hcHBlbmQoJGlucHV0QnRuKTtcbiAgICB3aW5kb3cuJFRlbXAkSW5wdXR0eHQgPSAkaW5wdXRUeHQ7XG4gICAgJGlucHV0QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh3aW5kb3cudGFibGVEZXNpb24pIHtcbiAgICAgICAgdGFibGVEZXNpb24uc2VsZWN0RGVmYXVsdFZhbHVlRGlhbG9nQmVnaW4oRWRpdFRhYmxlX1NlbGVjdERlZmF1bHRWYWx1ZSwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cucGFyZW50Lmxpc3REZXNpZ24uc2VsZWN0RGVmYXVsdFZhbHVlRGlhbG9nQmVnaW4od2luZG93LCBudWxsKTtcbiAgICAgICAgd2luZG93Ll9TZWxlY3RCaW5kT2JqID0ge1xuICAgICAgICAgIHNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWU6IGZ1bmN0aW9uIHNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWUocmVzdWx0KSB7XG4gICAgICAgICAgICBFZGl0VGFibGVfU2VsZWN0RGVmYXVsdFZhbHVlLnNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWUocmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuICRlbGVtO1xuICB9LFxuICBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciAkaW5wdXRUeHQgPSBlZGl0U3RhdXNIdG1sRWxlbS5maW5kKFwiaW5wdXRbdHlwZT0ndGV4dCddXCIpO1xuXG4gICAgaWYgKCRpbnB1dFR4dC5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgZGVmYXVsdFR5cGUgPSAkaW5wdXRUeHQuYXR0cihcImZpZWxkRGVmYXVsdFR5cGVcIik7XG4gICAgICB2YXIgZGVmYXVsdFZhbHVlID0gJGlucHV0VHh0LmF0dHIoXCJmaWVsZERlZmF1bHRWYWx1ZVwiKTtcbiAgICAgIHZhciBkZWZhdWx0VGV4dCA9ICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VGV4dFwiKTtcbiAgICAgIHZhciAkZWxlbSA9ICQoXCI8ZGl2PjwvZGl2PlwiKTtcbiAgICAgICRlbGVtLmFwcGVuZChcIjxsYWJlbD5cIiArIERlZmF1bHRWYWx1ZVV0aWxpdHkuZm9ybWF0VGV4dChkZWZhdWx0VHlwZSwgZGVmYXVsdFRleHQpICsgXCI8L2xhYmVsPlwiKTtcbiAgICAgICRlbGVtLmFwcGVuZChcIjxsYWJlbCBJc1NlcmlhbGl6ZT0ndHJ1ZScgQmluZE5hbWU9J2ZpZWxkRGVmYXVsdFR5cGUnIFZhbHVlPSdcIiArIGRlZmF1bHRUeXBlICsgXCInIHN0eWxlPSdkaXNwbGF5Om5vbmUnLz5cIik7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8bGFiZWwgSXNTZXJpYWxpemU9J3RydWUnIEJpbmROYW1lPSdmaWVsZERlZmF1bHRUZXh0JyBWYWx1ZT0nXCIgKyBkZWZhdWx0VGV4dCArIFwiJyBzdHlsZT0nZGlzcGxheTpub25lJy8+XCIpO1xuICAgICAgJGVsZW0uYXBwZW5kKFwiPGxhYmVsIElzU2VyaWFsaXplPSd0cnVlJyBCaW5kTmFtZT0nZmllbGREZWZhdWx0VmFsdWUnIFZhbHVlPSdcIiArIGRlZmF1bHRWYWx1ZSArIFwiJyBzdHlsZT0nZGlzcGxheTpub25lJy8+XCIpO1xuICAgICAgcmV0dXJuICRlbGVtO1xuICAgIH1cblxuICAgIHJldHVybiAkKFwiPGxhYmVsPjwvbGFiZWw+XCIpO1xuICB9LFxuICBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlOiBmdW5jdGlvbiBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWwgPSBlZGl0U3RhdXNIdG1sRWxlbS52YWwoKTtcbiAgICByZXR1cm4gRWRpdFRhYmxlVmFsaWRhdGUuVmFsaWRhdGUodmFsLCB0ZW1wbGF0ZSk7XG4gIH0sXG4gIHNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWU6IGZ1bmN0aW9uIHNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWUoZGVmYXVsdERhdGEpIHtcbiAgICB2YXIgJGlucHV0VHh0ID0gd2luZG93LiRUZW1wJElucHV0dHh0O1xuXG4gICAgaWYgKG51bGwgIT0gZGVmYXVsdERhdGEpIHtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VHlwZVwiLCBkZWZhdWx0RGF0YS5UeXBlKTtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VmFsdWVcIiwgZGVmYXVsdERhdGEuVmFsdWUpO1xuICAgICAgJGlucHV0VHh0LmF0dHIoXCJmaWVsZERlZmF1bHRUZXh0XCIsIGRlZmF1bHREYXRhLlRleHQpO1xuICAgICAgJGlucHV0VHh0LnZhbChEZWZhdWx0VmFsdWVVdGlsaXR5LmZvcm1hdFRleHQoZGVmYXVsdERhdGEuVHlwZSwgZGVmYXVsdERhdGEuVGV4dCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImZpZWxkRGVmYXVsdFR5cGVcIiwgXCJcIik7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImZpZWxkRGVmYXVsdFZhbHVlXCIsIFwiXCIpO1xuICAgICAgJGlucHV0VHh0LmF0dHIoXCJmaWVsZERlZmF1bHRUZXh0XCIsIFwiXCIpO1xuICAgICAgJGlucHV0VHh0LnZhbChcIlwiKTtcbiAgICB9XG4gIH1cbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBFZGl0VGFibGVfU2VsZWN0RmllbGRUeXBlRGF0YUxvYWRlciA9IHtcbiAgX2ZpZWxkRGF0YVR5cGVBcnJheTogbnVsbCxcbiAgR2V0RmllbGREYXRhVHlwZUFycmF5OiBmdW5jdGlvbiBHZXRGaWVsZERhdGFUeXBlQXJyYXkoKSB7XG4gICAgaWYgKHRoaXMuX2ZpZWxkRGF0YVR5cGVBcnJheSA9PSBudWxsKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXG4gICAgICBBamF4VXRpbGl0eS5Qb3N0U3luYyhcIi9SZXN0L0J1aWxkZXIvRGF0YVN0b3JhZ2UvRGF0YUJhc2UvVGFibGUvR2V0VGFibGVGaWVsZFR5cGVcIiwge30sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MgPT0gdHJ1ZSkge1xuICAgICAgICAgIHZhciBsaXN0ID0gSnNvblV0aWxpdHkuU3RyaW5nVG9Kc29uKGRhdGEuZGF0YSk7XG5cbiAgICAgICAgICBpZiAobGlzdCAhPSBudWxsICYmIGxpc3QgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfc2VsZi5fZmllbGREYXRhVHlwZUFycmF5ID0gbGlzdDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgRGlhbG9nVXRpbGl0eS5BbGVydCh3aW5kb3csIFwiQWxlcnRMb2FkaW5nUXVlcnlFcnJvclwiLCB7fSwgXCLliqDovb3lrZfmrrXnsbvlnovlpLHotKXvvIFcIiwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9maWVsZERhdGFUeXBlQXJyYXk7XG4gIH0sXG4gIEdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVZhbHVlOiBmdW5jdGlvbiBHZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlWYWx1ZShWYWx1ZSkge1xuICAgIHZhciBhcnJheURhdGEgPSB0aGlzLkdldEZpZWxkRGF0YVR5cGVBcnJheSgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheURhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvYmogPSBhcnJheURhdGFbaV07XG5cbiAgICAgIGlmIChvYmouVmFsdWUgPT0gVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhbGVydChcIuaJvuS4jeWIsOaMh+WumueahOaVsOaNruexu+Wei++8jOivt+ehruiupOaYr+WQpuaUr+aMgeivpeexu+Wei++8gVwiKTtcbiAgfSxcbiAgR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VGV4dDogZnVuY3Rpb24gR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VGV4dCh0ZXh0KSB7XG4gICAgdmFyIGFycmF5RGF0YSA9IHRoaXMuR2V0RmllbGREYXRhVHlwZUFycmF5KCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5RGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG9iaiA9IGFycmF5RGF0YVtpXTtcblxuICAgICAgaWYgKG9iai5UZXh0ID09IHRleHQpIHtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhbGVydChcIuaJvuS4jeWIsOaMh+WumueahOaVsOaNruexu+Wei++8jOivt+ehruiupOaYr+WQpuaUr+aMgeivpeexu+Wei++8gVwiKTtcbiAgfVxufTtcbnZhciBFZGl0VGFibGVfU2VsZWN0RmllbGRUeXBlID0ge1xuICBHZXRfRWRpdFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0VkaXRTdGF0dXNfSHRtbEVsZW0oX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIHZpZXdTdGF1c0h0bWxFbGVtLCBqc29uRGF0YXMsIGpzb25EYXRhU2luZ2xlKSB7XG4gICAgdmFyIHZhbCA9IFwiXCI7XG4gICAgdmFyICRlbGVtID0gJChcIjxzZWxlY3QgLz5cIik7XG5cbiAgICBpZiAoanNvbkRhdGFTaW5nbGUgIT0gbnVsbCAmJiBqc29uRGF0YVNpbmdsZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbCA9IGpzb25EYXRhU2luZ2xlW1wiZmllbGREYXRhVHlwZVwiXTtcbiAgICB9XG5cbiAgICBpZiAodmlld1N0YXVzSHRtbEVsZW0gIT0gbnVsbCAmJiB2aWV3U3RhdXNIdG1sRWxlbSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbCA9IHZpZXdTdGF1c0h0bWxFbGVtLmF0dHIoXCJWYWx1ZVwiKTtcbiAgICB9XG5cbiAgICB2YXIgX2ZpZWxkRGF0YVR5cGVBcnJheSA9IEVkaXRUYWJsZV9TZWxlY3RGaWVsZFR5cGVEYXRhTG9hZGVyLkdldEZpZWxkRGF0YVR5cGVBcnJheSgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfZmllbGREYXRhVHlwZUFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBfZmllbGREYXRhVHlwZUFycmF5W2ldLlZhbHVlO1xuICAgICAgdmFyIHRleHQgPSBfZmllbGREYXRhVHlwZUFycmF5W2ldLlRleHQ7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPSdcIiArIHZhbHVlICsgXCInPlwiICsgdGV4dCArIFwiPC9vcHRpb24+XCIpO1xuICAgIH1cblxuICAgIGlmICh2YWwgIT0gXCJcIikge1xuICAgICAgJGVsZW0udmFsKHZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtLnZhbChFZGl0VGFibGVfU2VsZWN0RmllbGRUeXBlRGF0YUxvYWRlci5HZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlUZXh0KFwi5a2X56ym5LiyXCIpLlZhbHVlKTtcbiAgICB9XG5cbiAgICAkZWxlbS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHZhbCA9ICQodGhpcykudmFsKCk7XG5cbiAgICAgIGlmICh2YWwgPT0gXCLmlbTmlbBcIikge1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS52YWwoMCk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5uZXh0KCkuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLm5leHQoKS5maW5kKFwiaW5wdXRcIikudmFsKDApO1xuICAgICAgfSBlbHNlIGlmICh2YWwgPT0gXCLlsI/mlbBcIikge1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5maW5kKFwiaW5wdXRcIikudmFsKDEwKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLm5leHQoKS5maW5kKFwiaW5wdXRcIikuYXR0cihcImRpc2FibGVkXCIsIGZhbHNlKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLm5leHQoKS5maW5kKFwiaW5wdXRcIikudmFsKDIpO1xuICAgICAgfSBlbHNlIGlmICh2YWwgPT0gXCLml6XmnJ/ml7bpl7RcIikge1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS52YWwoMjApO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5uZXh0KCkuZmluZChcImlucHV0XCIpLnZhbCgwKTtcbiAgICAgIH0gZWxzZSBpZiAodmFsID09IFwi5a2X56ym5LiyXCIpIHtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkuZmluZChcImlucHV0XCIpLnZhbCg1MCk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5uZXh0KCkuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLm5leHQoKS5maW5kKFwiaW5wdXRcIikudmFsKDApO1xuICAgICAgfSBlbHNlIGlmICh2YWwgPT0gXCLplb/lrZfnrKbkuLJcIikge1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS52YWwoMCk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5uZXh0KCkuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLm5leHQoKS5maW5kKFwiaW5wdXRcIikudmFsKDApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAkZWxlbTtcbiAgfSxcbiAgR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgdmFsdWUgPSBlZGl0U3RhdXNIdG1sRWxlbS52YWwoKTtcbiAgICB2YXIgdGV4dCA9IEVkaXRUYWJsZV9TZWxlY3RGaWVsZFR5cGVEYXRhTG9hZGVyLkdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVZhbHVlKHZhbHVlKS5UZXh0O1xuICAgIHZhciAkZWxlbSA9ICQoXCI8bGFiZWwgSXNTZXJpYWxpemU9J3RydWUnIEJpbmROYW1lPSdcIiArIHRlbXBsYXRlLkJpbmROYW1lICsgXCInIFZhbHVlPSdcIiArIHZhbHVlICsgXCInPlwiICsgdGV4dCArIFwiPC9sYWJlbD5cIik7XG4gICAgcmV0dXJuICRlbGVtO1xuICB9LFxuICBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlOiBmdW5jdGlvbiBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWwgPSBlZGl0U3RhdXNIdG1sRWxlbS52YWwoKTtcbiAgICByZXR1cm4gRWRpdFRhYmxlVmFsaWRhdGUuVmFsaWRhdGUodmFsLCB0ZW1wbGF0ZSk7XG4gIH1cbn07Il19
