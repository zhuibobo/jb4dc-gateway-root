<!DOCTYPE html><html lang="zh" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"><head><meta charset="UTF-8"><title>Title1</title><title>JBuild4D</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><script type="text/javascript" src="../../../../Js/External/JQuery-3.6.0/jquery-3.6.0.min.js"></script><script type="text/javascript" src="../../../../Js/External/VUE-2.6.10/vue.js"></script><script type="text/javascript" src="../../../../Js/External/IView-4.X/dist/iview.min.js"></script><script type="text/javascript" src="../../../../Js/External/JQuery-UI-1.12.1/jquery-ui.js"></script><script type="text/javascript" src="../../../../Js/External/ZTree-3.5.40/js/jquery.ztree.all.js"></script><script type="text/javascript" src="../../../../Js/External/Perfect-Scrollbar-V1.4.0/perfect-scrollbar.js"></script><script type="text/javascript" src="../../../../Js/JBuild4DCLib.js?refVersion=1634816425311"></script><script type="text/javascript" src="../../../../Js/UIEXComponent.js?refVersion=1634816425311"></script><script type="text/javascript" src="../../../../Js/VueEXComponent.js?refVersion=1634816425311"></script><script type="text/javascript" src="../../../../JB4DCBuilder/Js/UIEXComponentForBuilder.js?refVersion=1634816425311"></script><script type="text/javascript" src="../../../../JB4DCBuilder/Js/BuilderVueEXComponent.js?refVersion=1634816425311"></script><link rel="stylesheet" type="text/css" href="../../../../Themes/Default/IView-4.X/iview.css"><link rel="stylesheet" type="text/css" href="../../../../Themes/Default/JQueryUI/jquery-ui.css"><link rel="stylesheet" type="text/css" href="../../../../Themes/Default/JQueryUI/jquery-ui-important.css"><link rel="stylesheet" type="text/css" href="../../../../Js/External/Perfect-Scrollbar-V1.4.0/perfect-scrollbar.css"><link rel="stylesheet" type="text/css" href="../../../../Themes/Default/ZTree/zTreeStyle/zTreeStyle.css"><link rel="stylesheet" type="text/css" href="../../../../Themes/Default/Css/JBuild4DC.css?refVersion=1634816425311"><link rel="stylesheet" type="text/css" href="../../../../JB4DCBuilder/Themes/Default/Css/JBuild4DCBuilder.css?refVersion=1634816425311"></head><body><div id="appList" class="list-2column"><div class="left-outer-wrap" style="width:250px"><select-dblink-single-comp @on-selected-dblink="changeDBLink" ref="selectDBLinkComp"></select-dblink-single-comp><div class="inner-wrap" style="position:absolute;top:30px;bottom:10px;height:auto"><div class="tool-bar-wrap"><div alt="新增分类组" title="新增分类组" class="add" @click="addModule()"></div><div alt="修改分类组" title="修改分类组" class="edit" @click="editModule()"></div><div alt="删除分类组" title="删除分类组" class="del" @click="delModule()"></div><div alt="浏览分类组" title="浏览分类组" class="view" @click="viewModule()"></div><div alt="上移" title="上移" class="order-up" @click="moveModule('up')"></div><div alt="下移" title="下移" class="order-down last" @click="moveModule('down')"></div></div><div><ul id="zTreeUL" class="ztree"></ul></div></div></div><div class="right-outer-wrap iv-list-page-wrap" style="padding:10px;left:260px"><tabs @on-click="tabChange" v-model="selectedTabName"><tab-pane name="module-design" label="模块设计">模块设计的相关在线文档,html在线编辑器.</tab-pane><tab-pane name="list-webform" label="表单设计"><module-list-webform-comp :list-height="listHeight" :module-data="moduleData" :active-tab-name="selectedTabName"></module-list-webform-comp></tab-pane><tab-pane name="list-weblist" label="列表设计"><module-list-weblist-comp ref="moduleListWebListComp" :list-height="listHeight" :module-data="moduleData" :active-tab-name="selectedTabName"></module-list-weblist-comp></tab-pane><tab-pane name="list-flow" label="流程设计"><module-list-workflow-comp ref="moduleListWorkflowComp" :list-height="listHeight" :module-data="moduleData" :active-tab-name="selectedTabName"></module-list-workflow-comp></tab-pane><tab-pane name="list-appform" label="APP表单设计" disabled="disabled"></tab-pane><tab-pane name="list-applist" label="APP列表设计" disabled="disabled"></tab-pane><tab-pane name="list-report" label="报表设计" disabled="disabled"><div style="width:100%;height:60px"></div></tab-pane><tab-pane name="list-authority-name" label="权限别名" disabled="disabled"><div style="width:100%;height:60px"></div></tab-pane><tab-pane name="list-about-config" label="相关设置" disabled="disabled"><div style="width:100%;height:60px"></div></tab-pane></tabs></div></div><script>var appList=new Vue({el:"#appList",mounted:function(){var e=CookieUtility.GetCookie("DSGLINKID");e&&(this.$refs.selectDBLinkComp.setOldSelectedDBLink(e),this.initTree(e)),window.setTimeout(function(){appList.listHeight=ListPageUtility.GetGeneralPageHeight(-70)},500)},data:{acInterface:{getModuleData:"/Rest/Builder/Module/GetTreeData",moduleEditView:"/HTML/Builder/Module/ModuleEdit.html",deleteModule:"/Rest/Builder/Module/Delete",moveModule:"/Rest/Builder/Module/Move",form:{designView:"/PlatForm/Builder/Form/DetailView"}},treeIdFieldName:"moduleId",treeObj:null,treeSelectedNode:null,treeSetting:{async:{enable:!0,url:""},data:{key:{name:"moduleText"},simpleData:{enable:!0,idKey:"moduleId",pIdKey:"moduleParentId",rootId:0}},callback:{onClick:function(e,t,i){appList.treeNodeSelected(e,t,i)},onAsyncSuccess:function(e,t,i,l){appList.treeObj.expandAll(!0)}}},listHeight:ListPageUtility.DefaultListHeight-30,moduleData:null,selectedTabName:"list-webform"},methods:{changeDBLink:function(e){CookieUtility.SetCookie1Month("DSGLINKID",e.dbId),this.initTree(e.dbId),this.clearSearchCondition(),this.tableData=[]},initTree:function(e){var i=this;AjaxUtility.Post(this.acInterface.getModuleData,{dbLinkId:e},function(e){if(e.success){if(null!=e.data&&0<e.data.length)for(var t=0;t<e.data.length;t++)"是"==e.data[t].moduleIsSystem&&0==e.data[t].moduleChildCount?e.data[t].icon="/Themes/Png16X16/layout_error.png":"否"==e.data[t].moduleIsSystem&&0==e.data[t].moduleChildCount?e.data[t].icon="/Themes/Png16X16/layout_content.png":"-1"==e.data[t].moduleParentId&&(e.data[t].icon="/Themes/Png16X16/folder_brick.png");i.treeObj=$.fn.zTree.init($("#zTreeUL"),i.treeSetting,e.data),i.treeObj.expandAll(!0)}else DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},e.message,function(){})},this)},treeNodeSelected:function(e,t,i){this.treeSelectedNode=i,this.moduleData=i},addModule:function(){if(null!=this.treeSelectedNode){var e=BaseUtility.BuildView(this.acInterface.moduleEditView,{op:"add",parentId:this.treeSelectedNode[appList.treeIdFieldName]});DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,e,{title:"模块分组"},2)}else DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},"请选择父节点!",null)},editModule:function(){if(null!=this.treeSelectedNode){var e=BaseUtility.BuildView(this.acInterface.moduleEditView,{op:"update",recordId:this.treeSelectedNode[appList.treeIdFieldName]});DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,e,{title:"模块分组"},2)}else DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},"请选择需要编辑的节点!",null)},viewModule:function(){var e=BaseUtility.BuildView(this.acInterface.moduleEditView,{op:"view",recordId:this.treeSelectedNode[appList.treeIdFieldName]});DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,e,{title:"模块分组"},2)},delModule:function(){var e=this,t=this.treeSelectedNode[appList.treeIdFieldName];DialogUtility.Confirm(window,"确认要删除选定的节点吗？",function(){AjaxUtility.Post(e.acInterface.deleteModule,{recordId:t},function(e){e.success?DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},e.message,function(){appList.treeObj.removeNode(appList.treeSelectedNode),appList.treeSelectedNode=null}):DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},e.message,function(){})},this)})},moveModule:function(t){if(null!=this.treeSelectedNode){var e=this.treeSelectedNode[appList.treeIdFieldName];AjaxUtility.Post(this.acInterface.moveModule,{recordId:e,type:t},function(e){e.success?DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},e.message,function(){"down"==t?null!=appList.treeSelectedNode.getNextNode()&&appList.treeObj.moveNode(appList.treeSelectedNode.getNextNode(),appList.treeSelectedNode,"next",!1):null!=appList.treeSelectedNode.getPreNode()&&appList.treeObj.moveNode(appList.treeSelectedNode.getPreNode(),appList.treeSelectedNode,"prev",!1)}):DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},e.message,null)},this)}else DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},"请选择需要编辑的节点!",null)},newTreeNode:function(e){appList.treeObj.addNodes(this.treeSelectedNode,e,!1)},updateNode:function(e){this.treeSelectedNode=$.extend(!0,this.treeSelectedNode,e),appList.treeObj.updateNode(this.treeSelectedNode)},tabChange:function(e){}}})</script></body></html>